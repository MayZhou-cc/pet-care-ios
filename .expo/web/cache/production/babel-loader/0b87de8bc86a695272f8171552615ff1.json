{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import Icon from\"@expo/vector-icons/Ionicons\";import React,{Component,useState,useEffect}from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Alert from\"react-native-web/dist/exports/Alert\";import Image from\"react-native-web/dist/exports/Image\";import Button from\"react-native-web/dist/exports/Button\";import{createAppContainer}from\"react-navigation\";import{createMaterialTopTabNavigator}from'react-navigation-tabs';import{fb,Fire}from\"../src/firebase/APIKeys\";import{images,getBackgroundImage}from\"../components/images\";import Header from\"../components/Header\";var baseCurrency=100;var userid=Fire.shared.user._id;function OwnedTab(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),read=_useState2[0],allReads=_useState2[1];useEffect(function(){var readRef=fb.database().ref(\"response/\"+userid+\"/shop\");var OnLoadingListener=readRef.on(\"value\",function(snapshot){allReads([]);snapshot.forEach(function(childSnapshot){allReads(function(read){return[].concat(_toConsumableArray(read),[childSnapshot.val()]);});});});return function(){readRef.off(\"value\",OnLoadingListener);};},[]);return React.createElement(View,null,React.createElement(SafeAreaView,null,React.createElement(ScrollView,null,read.map(function(item,index){if(item[\"bought\"]){if(item[\"img\"]===0){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character0}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"Set\",disabled:false,onPress:function onPress(){return setAvatar(item,index);}}));}else if(item[\"img\"]===1){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character1}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"Set\",disabled:false,onPress:function onPress(){return setAvatar(item,index);}}));}else if(item[\"img\"]===2){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character2}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"Set\",disabled:false,onPress:function onPress(){return setAvatar(item,index);}}));}else if(item[\"img\"]===3){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character3}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"Set\",disabled:false,onPress:function onPress(){return setAvatar(item,index);}}));}}}))));}OwnedTab.navigationOptions={tabBarIcon:function tabBarIcon(_ref){var tintColor=_ref.tintColor,focused=_ref.focused;return React.createElement(Icon,{name:focused?\"ios-basket\":\"md-basket\",color:tintColor,size:25});}};var recordBuying=function recordBuying(index,buy,imgUrl,itemPrice){return new Promise(function(resolve,reject){var data={bought:buy,img:imgUrl,price:itemPrice};fb.database().ref(\"response/\"+userid+\"/shop/\"+index).update(data).then(function(snapshot){resolve(snapshot);}).catch(function(err){reject(err);});});};function completeBuying(price){baseCurrency=baseCurrency-price;fb.database().ref(\"response/\"+userid+\"/\").update({currency:baseCurrency}).then(function(){console.log(\"Success buying\");}).catch(function(error){console.log(error);});}function confirmBuying(item,index){Alert.alert(\"Are you sure?\",\"Unlock this avatar with $\"+item[\"price\"],[{text:\"Cancel\",onPress:function onPress(){return console.log(\"Cancel Pressed\");},style:\"cancel\"},{text:\"OK\",onPress:function onPress(){if(baseCurrency>=item[\"price\"]){completeBuying(item[\"price\"]);recordBuying(index,!item[\"bought\"],item[\"img\"],item[\"price\"]);}else{Alert.alert(\"Sorry, you can't afford this item.\");}}}],{cancelable:false});}function setAvatar(item,index){Alert.alert(\"Are you sure?\",\"Raise this avatar on home page\",[{text:\"Cancel\",onPress:function onPress(){return console.log(\"Cancel Pressed\");},style:\"cancel\"},{text:\"OK\",onPress:function onPress(){console.log(\"hello olivia, you reached here\");updataAvatar(index);}}],{cancelable:false});}function updataAvatar(data){console.log(\"print out the avatar index: \"+data);fb.database().ref(\"response/\"+userid+\"/\").update({character:data}).then(function(){console.log(\"Success buying\");}).catch(function(error){console.log(error);});}function ShopTab(){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),unbought=_useState4[0],allUnbought=_useState4[1];useEffect(function(){var unboughtRef=fb.database().ref(\"/response/\"+userid+\"/shop\");var OnLoadingListener=unboughtRef.on(\"value\",function(snapshot){allUnbought([]);snapshot.forEach(function(childSnapshot){allUnbought(function(unbought){return[].concat(_toConsumableArray(unbought),[childSnapshot.val()]);});});});return function(){unboughtRef.off(\"value\",OnLoadingListener);};},[]);return React.createElement(View,null,React.createElement(SafeAreaView,null,React.createElement(ScrollView,null,unbought.map(function(item,index){if(!item[\"bought\"]){if(item[\"img\"]===0){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character0}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"buy\",disabled:false,onPress:function onPress(){return confirmBuying(item,index);}}));}else if(item[\"img\"]===1){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character1}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"buy\",disabled:false,onPress:function onPress(){return confirmBuying(item,index);}}));}else if(item[\"img\"]===2){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character2}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"buy\",disabled:false,onPress:function onPress(){return confirmBuying(item,index);}}));}else if(item[\"img\"]===3){return React.createElement(View,{key:item[\"img\"],style:styles.itemContainer},React.createElement(Image,{style:styles.avatar,source:images.character3}),React.createElement(Text,{style:styles.text},\"Price: \",item[\"price\"]),React.createElement(Button,{title:\"buy\",disabled:false,onPress:function onPress(){return confirmBuying(item,index);}}));}}}))));}ShopTab.navigationOptions={tabBarIcon:function tabBarIcon(_ref2){var tintColor=_ref2.tintColor,focused=_ref2.focused;return React.createElement(Icon,{name:focused?\"ios-cart\":\"md-cart\",color:tintColor,size:25});}};var Tab=createMaterialTopTabNavigator({Shop:ShopTab,Owned:OwnedTab},{tabBarOptions:{activeTintColor:\"black\",showIcon:true,showLabel:true,style:{backgroundColor:\"transparent\"}}});var AppIndex=createAppContainer(Tab);var HomeScreen=function(_Component){_inherits(HomeScreen,_Component);var _super=_createSuper(HomeScreen);function HomeScreen(props){var _this;_classCallCheck(this,HomeScreen);_this=_super.call(this,props);_this.state={avatarCurrency:0,items:{}};if(!fb.apps.length){fb.initializeApp(ApiKeys.FirebaseConfig);}_this.readData();return _this;}_createClass(HomeScreen,[{key:\"readData\",value:function readData(){var _this2=this;userid=Fire.shared.user._id;fb.database().ref(\"response/\"+userid+\"/currency\").once(\"value\",function(dataSnapShot){baseCurrency=dataSnapShot.val();});fb.database().ref(\"response/\"+userid+\"/backgroundColor\").once(\"value\",function(dataSnapShot){var tempColor=dataSnapShot.val();_this2.setState({backgroundColor:tempColor});});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;fb.database().ref(\"response/\"+userid+\"/shop\").on(\"value\",function(querySnapShot){var data=querySnapShot.val()?querySnapShot.val():{};var shopitems=_objectSpread({},data);_this3.setState({items:shopitems});});fb.database().ref(\"response/\"+userid+\"/currency\").on(\"value\",function(querySnapShot){var data=querySnapShot.val()?querySnapShot.val():{};_this3.setState({avatarCurrency:data});});}},{key:\"render\",value:function render(){var background=getBackgroundImage(this.state.backgroundColor);return React.createElement(View,{style:styles.container},React.createElement(ImageBackground,{source:background,style:styles.backgroundImage},React.createElement(Header,{props:this.props,pageName:\"Avatar Shop\",baseCurrency:this.state.avatarCurrency}),React.createElement(AppIndex,null)));}}]);return HomeScreen;}(Component);export{HomeScreen as default};var styles=StyleSheet.create({container:{backgroundColor:\"#f0f8ff\",flex:1,flexDirection:\"column\"},backgroundImage:{flex:1,resizeMode:\"cover\",justifyContent:\"center\"},itemContainer:{height:230,borderWidth:0.5,alignItems:\"center\",justifyContent:\"center\",margin:3},avatarContainer:{alignItems:\"center\",justifyContent:\"center\"},avatar:{width:\"30%\",height:\"50%\",alignItems:\"center\"},buyText:{textAlign:\"center\"},text:{marginTop:5,fontSize:16,fontWeight:\"500\"}});","map":{"version":3,"sources":["/Users/mayzhou/development/React_Native/SelfMiniProject/pet-care/screens/ShopScreen.js"],"names":["Icon","React","Component","useState","useEffect","createAppContainer","createMaterialTopTabNavigator","fb","Fire","images","getBackgroundImage","Header","baseCurrency","userid","shared","user","_id","OwnedTab","read","allReads","readRef","database","ref","OnLoadingListener","on","snapshot","forEach","childSnapshot","val","off","map","item","index","styles","itemContainer","avatar","character0","text","setAvatar","character1","character2","character3","navigationOptions","tabBarIcon","tintColor","focused","recordBuying","buy","imgUrl","itemPrice","Promise","resolve","reject","data","bought","img","price","update","then","catch","err","completeBuying","currency","console","log","error","confirmBuying","Alert","alert","onPress","style","cancelable","updataAvatar","character","ShopTab","unbought","allUnbought","unboughtRef","Tab","Shop","Owned","tabBarOptions","activeTintColor","showIcon","showLabel","backgroundColor","AppIndex","HomeScreen","props","state","avatarCurrency","items","apps","length","initializeApp","ApiKeys","FirebaseConfig","readData","once","dataSnapShot","tempColor","setState","querySnapShot","shopitems","background","container","backgroundImage","StyleSheet","create","flex","flexDirection","resizeMode","justifyContent","height","borderWidth","alignItems","margin","avatarContainer","width","buyText","textAlign","marginTop","fontSize","fontWeight"],"mappings":"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","sourcesContent":["// Homescreen.js\r\n\r\nimport Icon from \"react-native-vector-icons/Ionicons\";\r\nimport React, { Component, useState, useEffect } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  TouchableOpacity,\r\n  ImageBackground,\r\n  SafeAreaView,\r\n  ScrollView,\r\n  Alert,\r\n  Image,\r\n  Button,\r\n} from \"react-native\";\r\nimport { createAppContainer } from \"react-navigation\";\r\nimport { createMaterialTopTabNavigator } from 'react-navigation-tabs';\r\n\r\nimport { fb, Fire } from \"../src/firebase/APIKeys\";\r\nimport { images, getBackgroundImage } from \"../components/images\";\r\nimport Header from \"../components/Header\";\r\n\r\nvar baseCurrency = 100;\r\nvar userid = Fire.shared.user._id;\r\n\r\n//Owned items tab\r\nfunction OwnedTab() {\r\n  const [read, allReads] = useState([]);\r\n  useEffect(() => {\r\n    const readRef = fb.database().ref(\"response/\" + userid + \"/shop\");\r\n    const OnLoadingListener = readRef.on(\"value\", (snapshot) => {\r\n      allReads([]);\r\n      snapshot.forEach(function (childSnapshot) {\r\n        allReads((read) => [...read, childSnapshot.val()]);\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      readRef.off(\"value\", OnLoadingListener);\r\n    };\r\n  }, []);\r\n  return (\r\n    <View>\r\n      <SafeAreaView>\r\n        <ScrollView>\r\n          {read.map(function (item, index) {\r\n            if (item[\"bought\"]) {\r\n              if (item[\"img\"] === 0) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character0} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"Set\"\r\n                      disabled={false}\r\n                      onPress={() => setAvatar(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              } else if (item[\"img\"] === 1) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character1} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"Set\"\r\n                      disabled={false}\r\n                      onPress={() => setAvatar(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              } else if (item[\"img\"] === 2) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character2} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"Set\"\r\n                      disabled={false}\r\n                      onPress={() => setAvatar(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              } else if (item[\"img\"] === 3) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character3} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"Set\"\r\n                      disabled={false}\r\n                      onPress={() => setAvatar(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              }\r\n            }\r\n          })}\r\n        </ScrollView>\r\n      </SafeAreaView>\r\n    </View>\r\n  );\r\n}\r\nOwnedTab.navigationOptions = {\r\n  tabBarIcon: ({ tintColor, focused }) => (\r\n    <Icon\r\n      name={focused ? \"ios-basket\" : \"md-basket\"}\r\n      color={tintColor}\r\n      size={25}\r\n    />\r\n  ),\r\n};\r\n\r\n//Change the status of bought in firebase\r\nconst recordBuying = (index, buy, imgUrl, itemPrice) => {\r\n  return new Promise(function (resolve, reject) {\r\n    let data = {\r\n      bought: buy,\r\n      img: imgUrl,\r\n      price: itemPrice,\r\n    };\r\n    fb.database()\r\n      .ref(\"response/\" + userid + \"/shop/\" + index)\r\n      .update(data)\r\n      .then((snapshot) => {\r\n        resolve(snapshot);\r\n      })\r\n      .catch((err) => {\r\n        reject(err);\r\n      });\r\n  });\r\n};\r\n\r\n//reduce currency in firebase\r\nfunction completeBuying(price) {\r\n  baseCurrency = baseCurrency - price;\r\n  fb.database()\r\n    .ref(\"response/\" + userid + \"/\")\r\n    .update({\r\n      currency: baseCurrency,\r\n    })\r\n    .then(() => {\r\n      console.log(\"Success buying\");\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\n// Pop up window to check with buying or not\r\nfunction confirmBuying(item, index) {\r\n  Alert.alert(\r\n    \"Are you sure?\",\r\n    \"Unlock this avatar with $\" + item[\"price\"],\r\n    [\r\n      {\r\n        text: \"Cancel\",\r\n        onPress: () => console.log(\"Cancel Pressed\"),\r\n        style: \"cancel\",\r\n      },\r\n      {\r\n        text: \"OK\",\r\n        onPress: () => {\r\n          if (baseCurrency >= item[\"price\"]) {\r\n            completeBuying(item[\"price\"]);\r\n            recordBuying(index, !item[\"bought\"], item[\"img\"], item[\"price\"]);\r\n          } else {\r\n            Alert.alert(\"Sorry, you can't afford this item.\");\r\n          }\r\n        },\r\n      },\r\n    ],\r\n    { cancelable: false }\r\n  );\r\n}\r\n\r\n// Pop up window to confirm set the avatar on home page\r\nfunction setAvatar(item, index) {\r\n  Alert.alert(\r\n    \"Are you sure?\",\r\n    \"Raise this avatar on home page\",\r\n    [\r\n      {\r\n        text: \"Cancel\",\r\n        onPress: () => console.log(\"Cancel Pressed\"),\r\n        style: \"cancel\",\r\n      },\r\n      {\r\n        text: \"OK\",\r\n        onPress: () => {\r\n          console.log(\"hello olivia, you reached here\");\r\n          updataAvatar(index);\r\n          // completeBuying(index);\r\n        },\r\n      },\r\n    ],\r\n    { cancelable: false }\r\n  );\r\n}\r\n\r\n//Upload the chosen avatar data in firebase\r\nfunction updataAvatar(data) {\r\n  console.log(\"print out the avatar index: \" + data);\r\n  fb.database()\r\n    .ref(\"response/\" + userid + \"/\")\r\n    .update({\r\n      character: data,\r\n    })\r\n    .then(() => {\r\n      console.log(\"Success buying\");\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\n// Tab of shop to choose items to buy\r\nfunction ShopTab() {\r\n  const [unbought, allUnbought] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const unboughtRef = fb.database().ref(\"/response/\" + userid + \"/shop\");\r\n    const OnLoadingListener = unboughtRef.on(\"value\", (snapshot) => {\r\n      allUnbought([]);\r\n      snapshot.forEach(function (childSnapshot) {\r\n        // console.log(childSnapshot.val());\r\n        allUnbought((unbought) => [...unbought, childSnapshot.val()]);\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      unboughtRef.off(\"value\", OnLoadingListener);\r\n    };\r\n  }, []);\r\n  return (\r\n    <View>\r\n      <SafeAreaView>\r\n        <ScrollView>\r\n          {unbought.map(function (item, index) {\r\n            if (!item[\"bought\"]) {\r\n              if (item[\"img\"] === 0) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character0} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"buy\"\r\n                      disabled={false}\r\n                      onPress={() => confirmBuying(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              } else if (item[\"img\"] === 1) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character1} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"buy\"\r\n                      disabled={false}\r\n                      onPress={() => confirmBuying(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              } else if (item[\"img\"] === 2) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character2} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"buy\"\r\n                      disabled={false}\r\n                      onPress={() => confirmBuying(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              } else if (item[\"img\"] === 3) {\r\n                return (\r\n                  <View key={item[\"img\"]} style={styles.itemContainer}>\r\n                    <Image style={styles.avatar} source={images.character3} />\r\n                    <Text style={styles.text}>Price: {item[\"price\"]}</Text>\r\n                    <Button\r\n                      title=\"buy\"\r\n                      disabled={false}\r\n                      onPress={() => confirmBuying(item, index)}\r\n                    />\r\n                  </View>\r\n                );\r\n              }\r\n            }\r\n          })}\r\n        </ScrollView>\r\n      </SafeAreaView>\r\n    </View>\r\n  );\r\n}\r\nShopTab.navigationOptions = {\r\n  tabBarIcon: ({ tintColor, focused }) => (\r\n    <Icon name={focused ? \"ios-cart\" : \"md-cart\"} color={tintColor} size={25} />\r\n  ),\r\n};\r\n\r\nconst Tab = createMaterialTopTabNavigator(\r\n  {\r\n    Shop: ShopTab,\r\n    Owned: OwnedTab,\r\n  },\r\n  {\r\n    tabBarOptions: {\r\n      activeTintColor: \"black\",\r\n      showIcon: true,\r\n      showLabel: true,\r\n      style: {\r\n        backgroundColor: \"transparent\",\r\n      },\r\n    },\r\n  }\r\n);\r\nconst AppIndex = createAppContainer(Tab);\r\n\r\nexport default class HomeScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      avatarCurrency: 0,\r\n      items: {},\r\n    };\r\n    if (!fb.apps.length) {\r\n      fb.initializeApp(ApiKeys.FirebaseConfig);\r\n    }\r\n    this.readData();\r\n  }\r\n\r\n  readData() {\r\n    userid = Fire.shared.user._id;\r\n    fb.database()\r\n      .ref(\"response/\" + userid + \"/currency\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        baseCurrency = dataSnapShot.val();\r\n      });\r\n    fb.database()\r\n      .ref(\"response/\" + userid + \"/backgroundColor\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var tempColor = dataSnapShot.val();\r\n        this.setState({ backgroundColor: tempColor });\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    fb.database()\r\n      .ref(\"response/\" + userid + \"/shop\")\r\n      .on(\"value\", (querySnapShot) => {\r\n        let data = querySnapShot.val() ? querySnapShot.val() : {};\r\n        let shopitems = { ...data };\r\n        this.setState({\r\n          items: shopitems,\r\n        });\r\n      });\r\n    fb.database()\r\n      .ref(\"response/\" + userid + \"/currency\")\r\n      .on(\"value\", (querySnapShot) => {\r\n        let data = querySnapShot.val() ? querySnapShot.val() : {};\r\n        this.setState({\r\n          avatarCurrency: data,\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const background = getBackgroundImage(this.state.backgroundColor);\r\n    return (\r\n      <View style={styles.container}>\r\n        <ImageBackground source={background} style={styles.backgroundImage}>\r\n          <Header\r\n            props={this.props}\r\n            pageName=\"Avatar Shop\"\r\n            baseCurrency={this.state.avatarCurrency}\r\n          />\r\n          <AppIndex />\r\n        </ImageBackground>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#f0f8ff\",\r\n    flex: 1,\r\n    flexDirection: \"column\",\r\n  },\r\n\r\n  backgroundImage: {\r\n    flex: 1,\r\n    resizeMode: \"cover\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  itemContainer: {\r\n    height: 230,\r\n    borderWidth: 0.5,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    margin: 3,\r\n  },\r\n\r\n  avatarContainer: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  avatar: {\r\n    width: \"30%\",\r\n    height: \"50%\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  buyText: {\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  text: {\r\n    marginTop: 5,\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}