{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import*as fb from\"firebase\";import Alert from\"react-native-web/dist/exports/Alert\";var FirebaseConfig={apiKey:\"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",authDomain:\"synthesis-firebase-react.firebaseapp.com\",databaseURL:\"https://synthesis-firebase-react.firebaseio.com\",projectId:\"synthesis-firebase-react\",storageBucket:\"synthesis-firebase-react.appspot.com\",messagingSenderId:\"889035117044\",appId:\"1:889035117044:web:2063c6eb73fe1ba41729a1\",measurementId:\"G-K1TL8RR4T8\"};if(!fb.apps.length){fb.initializeApp(FirebaseConfig);}var Fire=function(){function Fire(){var _this=this;_classCallCheck(this,Fire);this.init=function(){if(!fb.apps.length){fb.initializeApp({apiKey:\"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",authDomain:\"synthesis-firebase-react.firebaseapp.com\",databaseURL:\"https://synthesis-firebase-react.firebaseio.com\",projectId:\"synthesis-firebase-react\",storageBucket:\"synthesis-firebase-react.appspot.com\",messagingSenderId:\"889035117044\",appId:\"1:889035117044:web:2063c6eb73fe1ba41729a1\",measurementId:\"G-K1TL8RR4T8\"});}};this.observeAuth=function(){return fb.auth().onAuthStateChanged(_this.onAuthStateChanged);};this.checkAuth=function(){fb.auth().onAuthStateChanged(function(user){if(!user){Alert.alert(\"Wrong username/ password\");return;}});};this.parse=function(message){var _message$val=message.val(),user=_message$val.user,text=_message$val.text,timestamp=_message$val.timestamp;var _id=message.key;var createAt=new Date(timestamp);return{_id:_id,createAt:createAt,text:text,user:user};};this.on=function(callback){return _this.ref.limitToLast(20).on(\"child_added\",function(snapshot){return callback(_this.parse(snapshot));});};this.send=function(messages){messages.forEach(function(item){var message={text:item.text,timestamp:_this.timestamp,user:item.user};_this.ref.push(message);});};this.get=function(callback){_this.db.on(\"child_added\",function(snapshot){return callback(_this.parse.snapshot);});};this.init();}_createClass(Fire,[{key:\"off\",value:function off(){this.ref.off();}},{key:\"uid\",get:function get(){return(fb.auth().currentUser||{}).uid;}},{key:\"user\",get:function get(){return{_id:Fire.shared.uid};}},{key:\"ref\",get:function get(){return fb.database().ref(\"messages\");}},{key:\"timestamp\",get:function get(){return fb.database.ServerValue.TIMESTAMP;}}]);return Fire;}();Fire.shared=new Fire();export{fb,Fire};","map":{"version":3,"sources":["/Users/mayzhou/development/React_Native/SelfMiniProject/pet-care/src/firebase/APIKeys.js"],"names":["fb","FirebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","Fire","init","observeAuth","auth","onAuthStateChanged","checkAuth","user","Alert","alert","parse","message","val","text","timestamp","_id","key","createAt","Date","on","callback","ref","limitToLast","snapshot","send","messages","forEach","item","push","get","db","off","currentUser","uid","shared","database","ServerValue","TIMESTAMP"],"mappings":"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","sourcesContent":["import * as fb from \"firebase\";\r\nimport { Alert } from \"react-native\";\r\n// import firebase from \"@react-native-firebase/app\";\r\n// import auth from \"@react-native-firebase/auth\";\r\n// import database from \"@react-native-firebase/database\";\r\n\r\nconst FirebaseConfig = {\r\n  apiKey: \"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",\r\n  authDomain: \"synthesis-firebase-react.firebaseapp.com\",\r\n  databaseURL: \"https://synthesis-firebase-react.firebaseio.com\",\r\n  projectId: \"synthesis-firebase-react\",\r\n  storageBucket: \"synthesis-firebase-react.appspot.com\",\r\n  messagingSenderId: \"889035117044\",\r\n  appId: \"1:889035117044:web:2063c6eb73fe1ba41729a1\",\r\n  measurementId: \"G-K1TL8RR4T8\",\r\n};\r\n\r\nif (!fb.apps.length) {\r\n  fb.initializeApp(FirebaseConfig);\r\n}\r\n\r\nclass Fire {\r\n  constructor() {\r\n    this.init();\r\n    // this.checkAuth();\r\n  }\r\n\r\n  init = () => {\r\n    if (!fb.apps.length) {\r\n      fb.initializeApp({\r\n        apiKey: \"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",\r\n        authDomain: \"synthesis-firebase-react.firebaseapp.com\",\r\n        databaseURL: \"https://synthesis-firebase-react.firebaseio.com\",\r\n        projectId: \"synthesis-firebase-react\",\r\n        storageBucket: \"synthesis-firebase-react.appspot.com\",\r\n        messagingSenderId: \"889035117044\",\r\n        appId: \"1:889035117044:web:2063c6eb73fe1ba41729a1\",\r\n        measurementId: \"G-K1TL8RR4T8\",\r\n      });\r\n    }\r\n  };\r\n\r\n  observeAuth = () => fb.auth().onAuthStateChanged(this.onAuthStateChanged);\r\n\r\n  checkAuth = () => {\r\n    fb.auth().onAuthStateChanged((user) => {\r\n      if (!user) {\r\n        Alert.alert(\"Wrong username/ password\");\r\n        return;\r\n      }\r\n    });\r\n  };\r\n\r\n  get uid() {\r\n    return (fb.auth().currentUser || {}).uid;\r\n  }\r\n\r\n  get user() {\r\n    return {\r\n      _id: Fire.shared.uid,\r\n    };\r\n  }\r\n\r\n  get ref() {\r\n    return fb.database().ref(\"messages\");\r\n  }\r\n\r\n  parse = (message) => {\r\n    const { user, text, timestamp } = message.val();\r\n    const { key: _id } = message;\r\n    const createAt = new Date(timestamp);\r\n    return {\r\n      _id,\r\n      createAt,\r\n      text,\r\n      user,\r\n    };\r\n  };\r\n\r\n  on = (callback) =>\r\n    this.ref\r\n      .limitToLast(20)\r\n      .on(\"child_added\", (snapshot) => callback(this.parse(snapshot)));\r\n\r\n  get timestamp() {\r\n    return fb.database.ServerValue.TIMESTAMP;\r\n  }\r\n\r\n  send = (messages) => {\r\n    messages.forEach((item) => {\r\n      const message = {\r\n        text: item.text,\r\n        timestamp: this.timestamp,\r\n        user: item.user,\r\n      };\r\n      this.ref.push(message);\r\n    });\r\n  };\r\n\r\n  get = (callback) => {\r\n    this.db.on(\"child_added\", (snapshot) => callback(this.parse.snapshot));\r\n  };\r\n\r\n  off() {\r\n    this.ref.off();\r\n  }\r\n}\r\n\r\nFire.shared = new Fire();\r\nexport { fb, Fire };\r\n"]},"metadata":{},"sourceType":"module"}