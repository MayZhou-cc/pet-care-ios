{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport * as fb from \"firebase\";\nvar FirebaseConfig = {\n  apiKey: \"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",\n  authDomain: \"synthesis-firebase-react.firebaseapp.com\",\n  databaseURL: \"https://synthesis-firebase-react.firebaseio.com\",\n  projectId: \"synthesis-firebase-react\",\n  storageBucket: \"synthesis-firebase-react.appspot.com\",\n  messagingSenderId: \"889035117044\",\n  appId: \"1:889035117044:web:2063c6eb73fe1ba41729a1\",\n  measurementId: \"G-K1TL8RR4T8\"\n};\n\nif (!fb.apps.length) {\n  fb.initializeApp(FirebaseConfig);\n}\n\nvar Fire = function () {\n  function Fire() {\n    var _this = this;\n\n    _classCallCheck(this, Fire);\n\n    this.init = function () {\n      if (!fb.apps.length) {\n        fb.initializeApp({\n          apiKey: \"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",\n          authDomain: \"synthesis-firebase-react.firebaseapp.com\",\n          databaseURL: \"https://synthesis-firebase-react.firebaseio.com\",\n          projectId: \"synthesis-firebase-react\",\n          storageBucket: \"synthesis-firebase-react.appspot.com\",\n          messagingSenderId: \"889035117044\",\n          appId: \"1:889035117044:web:2063c6eb73fe1ba41729a1\",\n          measurementId: \"G-K1TL8RR4T8\"\n        });\n      }\n    };\n\n    this.observeAuth = function () {\n      return fb.auth().onAuthStateChanged(_this.onAuthStateChanged);\n    };\n\n    this.checkAuth = function () {\n      fb.auth().onAuthStateChanged(function (user) {\n        if (!user) {\n          fb.auth().signInAnonymously();\n        }\n      });\n    };\n\n    this.parse = function (message) {\n      var _message$val = message.val(),\n          user = _message$val.user,\n          text = _message$val.text,\n          timestamp = _message$val.timestamp;\n\n      var _id = message.key;\n      var createAt = new Date(timestamp);\n      return {\n        _id: _id,\n        createAt: createAt,\n        text: text,\n        user: user\n      };\n    };\n\n    this.on = function (callback) {\n      return _this.ref.limitToLast(20).on(\"child_added\", function (snapshot) {\n        return callback(_this.parse(snapshot));\n      });\n    };\n\n    this.send = function (messages) {\n      messages.forEach(function (item) {\n        var message = {\n          text: item.text,\n          timestamp: _this.timestamp,\n          user: item.user\n        };\n\n        _this.ref.push(message);\n      });\n    };\n\n    this.get = function (callback) {\n      _this.db.on(\"child_added\", function (snapshot) {\n        return callback(_this.parse.snapshot);\n      });\n    };\n\n    this.init();\n    this.checkAuth();\n  }\n\n  _createClass(Fire, [{\n    key: \"off\",\n    value: function off() {\n      this.ref.off();\n    }\n  }, {\n    key: \"uid\",\n    get: function get() {\n      return (fb.auth().currentUser || {}).uid;\n    }\n  }, {\n    key: \"ref\",\n    get: function get() {\n      return fb.database().ref(\"messages\");\n    }\n  }, {\n    key: \"timestamp\",\n    get: function get() {\n      return fb.database.ServerValue.TIMESTAMP;\n    }\n  }]);\n\n  return Fire;\n}();\n\nFire.shared = new Fire();\nexport { fb, Fire };","map":{"version":3,"sources":["C:/Users/s4397674/Documents/PP/test/src/firebase/APIKeys.js"],"names":["fb","FirebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","Fire","init","observeAuth","auth","onAuthStateChanged","checkAuth","user","signInAnonymously","parse","message","val","text","timestamp","_id","key","createAt","Date","on","callback","ref","limitToLast","snapshot","send","messages","forEach","item","push","get","db","off","currentUser","uid","database","ServerValue","TIMESTAMP","shared"],"mappings":"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","sourcesContent":["import * as fb from \"firebase\";\r\n// import firebase from \"@react-native-firebase/app\";\r\n// import auth from \"@react-native-firebase/auth\";\r\n// import database from \"@react-native-firebase/database\";\r\n\r\nconst FirebaseConfig = {\r\n  apiKey: \"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",\r\n  authDomain: \"synthesis-firebase-react.firebaseapp.com\",\r\n  databaseURL: \"https://synthesis-firebase-react.firebaseio.com\",\r\n  projectId: \"synthesis-firebase-react\",\r\n  storageBucket: \"synthesis-firebase-react.appspot.com\",\r\n  messagingSenderId: \"889035117044\",\r\n  appId: \"1:889035117044:web:2063c6eb73fe1ba41729a1\",\r\n  measurementId: \"G-K1TL8RR4T8\",\r\n};\r\n\r\nif (!fb.apps.length) {\r\n  fb.initializeApp(FirebaseConfig);\r\n}\r\n\r\nclass Fire {\r\n  constructor() {\r\n    this.init();\r\n    this.checkAuth();\r\n  }\r\n\r\n  init = () => {\r\n    if (!fb.apps.length) {\r\n      fb.initializeApp({\r\n        apiKey: \"AIzaSyBycokGuTKFl6iO2jNlqboJrpanJJK-cJ0\",\r\n        authDomain: \"synthesis-firebase-react.firebaseapp.com\",\r\n        databaseURL: \"https://synthesis-firebase-react.firebaseio.com\",\r\n        projectId: \"synthesis-firebase-react\",\r\n        storageBucket: \"synthesis-firebase-react.appspot.com\",\r\n        messagingSenderId: \"889035117044\",\r\n        appId: \"1:889035117044:web:2063c6eb73fe1ba41729a1\",\r\n        measurementId: \"G-K1TL8RR4T8\",\r\n      });\r\n    }\r\n  };\r\n\r\n  observeAuth = () => fb.auth().onAuthStateChanged(this.onAuthStateChanged);\r\n\r\n  checkAuth = () => {\r\n    fb.auth().onAuthStateChanged((user) => {\r\n      if (!user) {\r\n        fb.auth().signInAnonymously();\r\n      }\r\n    });\r\n  };\r\n\r\n  get uid() {\r\n    return (fb.auth().currentUser || {}).uid;\r\n  }\r\n\r\n  get ref() {\r\n    return fb.database().ref(\"messages\");\r\n  }\r\n\r\n  parse = (message) => {\r\n    const { user, text, timestamp } = message.val();\r\n    const { key: _id } = message;\r\n    const createAt = new Date(timestamp);\r\n    return {\r\n      _id,\r\n      createAt,\r\n      text,\r\n      user,\r\n    };\r\n  };\r\n\r\n  on = (callback) =>\r\n    this.ref\r\n      .limitToLast(20)\r\n      .on(\"child_added\", (snapshot) => callback(this.parse(snapshot)));\r\n\r\n  get timestamp() {\r\n    return fb.database.ServerValue.TIMESTAMP;\r\n  }\r\n\r\n  send = (messages) => {\r\n    messages.forEach((item) => {\r\n      const message = {\r\n        text: item.text,\r\n        timestamp: this.timestamp,\r\n        user: item.user,\r\n      };\r\n      this.ref.push(message);\r\n    });\r\n  };\r\n\r\n  get = (callback) => {\r\n    this.db.on(\"child_added\", (snapshot) => callback(this.parse.snapshot));\r\n  };\r\n\r\n  off() {\r\n    this.ref.off();\r\n  }\r\n}\r\n\r\nFire.shared = new Fire();\r\nexport { fb, Fire };\r\n"]},"metadata":{},"sourceType":"module"}