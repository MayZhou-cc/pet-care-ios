{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\s4397674\\\\Documents\\\\PP\\\\test\\\\components\\\\auth\\\\SignUpScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as firebase from \"firebase\";\n\nfunction readUserTemplate(uid) {\n  firebase.database().ref(\"response/1/\").once(\"value\", function (dataSnapShot) {\n    var key = dataSnapShot.val();\n    createNewUser(uid, key);\n  });\n}\n\nfunction createNewUser(index, content) {\n  return new Promise(function (resolve, reject) {\n    var key;\n\n    if (index != null) {\n      key = index;\n    } else {\n      key = firebase.database().ref().push().key;\n    }\n\n    var dataToSave = content;\n    firebase.database().ref(\"/response/\" + key).update(dataToSave).then(function (snapshot) {\n      resolve(snapshot);\n    }).catch(function (err) {\n      reject(err);\n    });\n  });\n}\n\n;\n\nvar SignUpScreen = function (_Component) {\n  _inherits(SignUpScreen, _Component);\n\n  var _super = _createSuper(SignUpScreen);\n\n  function SignUpScreen(props) {\n    var _this;\n\n    _classCallCheck(this, SignUpScreen);\n\n    _this = _super.call(this, props);\n\n    _this.onSignupPress = function () {\n      if (_this.state.password !== _this.state.passwordConfirm) {\n        Alert.alert(\"Passwords do not match\");\n        return;\n      }\n\n      firebase.auth().createUserWithEmailAndPassword(_this.state.email, _this.state.password).then(function () {\n        readUserTemplate(firebase.auth().getUid());\n      }, function (error) {\n        Alert.alert(error.message);\n      });\n    };\n\n    _this.onBackToLoginPress = function () {\n      _this.props.navigation.navigate(\"Login\");\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      passwordConfirm: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(SignUpScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: {\n          paddingTop: 50,\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }\n      }, \"Signup\"), React.createElement(TextInput, {\n        style: {\n          width: 200,\n          height: 40,\n          borderWidth: 1\n        },\n        value: this.state.email,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            email: text\n          });\n        },\n        placeholder: \"Email\",\n        keyboardType: \"email-address\",\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: {\n          paddingTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }), React.createElement(TextInput, {\n        style: {\n          width: 200,\n          height: 40,\n          borderWidth: 1\n        },\n        value: this.state.password,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            password: text\n          });\n        },\n        placeholder: \"Password\",\n        secureTextEntry: true,\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: {\n          paddingTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }\n      }), React.createElement(TextInput, {\n        style: {\n          width: 200,\n          height: 40,\n          borderWidth: 1\n        },\n        value: this.state.passwordConfirm,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            passwordConfirm: text\n          });\n        },\n        placeholder: \"Password (confirm)\",\n        secureTextEntry: true,\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }\n      }), React.createElement(Button, {\n        title: \"Signup\",\n        onPress: this.onSignupPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }\n      }), React.createElement(Button, {\n        title: \"Back to Login\",\n        onPress: this.onBackToLoginPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return SignUpScreen;\n}(Component);\n\nexport { SignUpScreen as default };\nvar style = StyleSheet.create({});","map":{"version":3,"sources":["C:/Users/s4397674/Documents/PP/test/components/auth/SignUpScreen.js"],"names":["React","Component","firebase","readUserTemplate","uid","database","ref","once","dataSnapShot","key","val","createNewUser","index","content","Promise","resolve","reject","push","dataToSave","update","then","snapshot","catch","err","SignUpScreen","props","onSignupPress","state","password","passwordConfirm","Alert","alert","auth","createUserWithEmailAndPassword","email","getUid","error","message","onBackToLoginPress","navigation","navigate","paddingTop","alignItems","width","height","borderWidth","text","setState","style","StyleSheet","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { StyleSheet, View, Text, TextInput, Button, Alert } from \"react-native\";\r\nimport * as firebase from \"firebase\";\r\n\r\nfunction readUserTemplate(uid) {\r\n  firebase.database()\r\n    .ref(\"response/1/\")\r\n    .once(\"value\", (dataSnapShot) => {\r\n      var key = dataSnapShot.val();\r\n      createNewUser(uid, key);\r\n    });\r\n}\r\n\r\n// Create a new response user data storing from the existing template\r\nfunction createNewUser(index, content) {\r\n  return new Promise(function (resolve, reject) {\r\n    let key;\r\n    if (index != null) {\r\n      key = index;\r\n    } else {\r\n      key = firebase.database().ref().push().key;\r\n    }\r\n    let dataToSave = content;\r\n    // console.log(dataToSave);\r\n    firebase.database()\r\n      .ref(\"/response/\" + key)\r\n      .update(dataToSave)\r\n      .then((snapshot) => {\r\n        resolve(snapshot);\r\n      })\r\n      .catch((err) => {\r\n        reject(err);\r\n      });\r\n  });\r\n};\r\n\r\nexport default class SignUpScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      passwordConfirm: \"\",\r\n    };\r\n    // readUserTemplate = readUserTemplate.bind(this);\r\n  }\r\n\r\n  onSignupPress = () => {\r\n    if (this.state.password !== this.state.passwordConfirm) {\r\n      Alert.alert(\"Passwords do not match\");\r\n      return;\r\n    }\r\n    \r\n    firebase\r\n      .auth()\r\n      .createUserWithEmailAndPassword(this.state.email, this.state.password)\r\n      .then(\r\n        () => {\r\n          readUserTemplate(firebase.auth().getUid());\r\n        },\r\n        (error) => {\r\n          Alert.alert(error.message);\r\n        }\r\n      );\r\n  };\r\n\r\n  // Update tip after the tip has been read\r\n  // createNewUser = (index, id, name, tip, type, reward, complete) => {\r\n  //   return new Promise(function (resolve, reject) {\r\n  //     let key;\r\n  //     if (id != null) {\r\n  //       key = id;\r\n  //     } else {\r\n  //       key = fb.database().ref().push().key;\r\n  //     }\r\n  //     let dataToSave = {\r\n  //       tipID: key,\r\n  //       tipName: name,\r\n  //       complete: complete,\r\n  //       tipReward: reward,\r\n  //       tip: tip,\r\n  //       tipType: type,\r\n  //     };\r\n  //     console.log(dataToSave);\r\n  //     fb.database()\r\n  //       .ref(\"/response/nutritionalTips/\" + index)\r\n  //       .update(dataToSave)\r\n  //       .then((snapshot) => {\r\n  //         resolve(snapshot);\r\n  //       })\r\n  //       .catch((err) => {\r\n  //         reject(err);\r\n  //       });\r\n  //   });\r\n  // };\r\n\r\n  onBackToLoginPress = () => {\r\n    this.props.navigation.navigate(\"Login\");\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <View style={{ paddingTop: 50, alignItems: \"center\" }}>\r\n        <Text>Signup</Text>\r\n        <TextInput\r\n          style={{ width: 200, height: 40, borderWidth: 1 }}\r\n          value={this.state.email}\r\n          onChangeText={(text) => {\r\n            this.setState({ email: text });\r\n          }}\r\n          placeholder=\"Email\"\r\n          keyboardType=\"email-address\"\r\n          autoCapitalize=\"none\"\r\n          autoCorrect={false}\r\n        />\r\n\r\n        <View style={{ paddingTop: 10 }} />\r\n\r\n        <TextInput\r\n          style={{ width: 200, height: 40, borderWidth: 1 }}\r\n          value={this.state.password}\r\n          onChangeText={(text) => {\r\n            this.setState({ password: text });\r\n          }}\r\n          placeholder=\"Password\"\r\n          secureTextEntry={true}\r\n          autoCapitalize=\"none\"\r\n          autoCorrect={false}\r\n        />\r\n\r\n        <View style={{ paddingTop: 10 }} />\r\n\r\n        <TextInput\r\n          style={{ width: 200, height: 40, borderWidth: 1 }}\r\n          value={this.state.passwordConfirm}\r\n          onChangeText={(text) => {\r\n            this.setState({ passwordConfirm: text });\r\n          }}\r\n          placeholder=\"Password (confirm)\"\r\n          secureTextEntry={true}\r\n          autoCapitalize=\"none\"\r\n          autoCorrect={false}\r\n        />\r\n\r\n        <Button title=\"Signup\" onPress={this.onSignupPress} />\r\n\r\n        <Button title=\"Back to Login\" onPress={this.onBackToLoginPress} />\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst style = StyleSheet.create({});\r\n"]},"metadata":{},"sourceType":"module"}