{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\s4397674\\\\Documents\\\\PP\\\\test\\\\components\\\\HomeScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { ProgressBar, Colors } from \"react-native-paper\";\nimport * as firebase from \"firebase\";\nimport { fb, Fire } from \"../src/firebase/APIKeys\";\nimport { images, getBackgroundImage } from \"../components/images\";\nimport Header from \"../components/Header\";\n\nvar HomeScreen = function (_Component) {\n  _inherits(HomeScreen, _Component);\n\n  var _super = _createSuper(HomeScreen);\n\n  function HomeScreen(_props) {\n    var _this;\n\n    _classCallCheck(this, HomeScreen);\n\n    _this = _super.call(this, _props);\n\n    _this.handleAvatarHealthChange = function (props) {\n      var avatarHealth = props.health;\n      var avatarCharacter = _this.state.avatarCharacter;\n\n      if (avatarCharacter === 1) {\n        return React.createElement(Image, {\n          style: styles.avatar,\n          source: images.character1,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 14\n          }\n        });\n      } else if (avatarCharacter === 2) {\n        return React.createElement(Image, {\n          style: styles.avatar,\n          source: images.character2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 14\n          }\n        });\n      } else if (avatarCharacter === 3) {\n        return React.createElement(Image, {\n          style: styles.avatar,\n          source: images.character3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 14\n          }\n        });\n      } else {\n        if (avatarHealth > 80) {\n          return React.createElement(Image, {\n            style: styles.avatar,\n            source: require(\"../assets/avatar/avatar_1.png\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 11\n            }\n          });\n        } else if (avatarHealth > 60 && avatarHealth <= 80) {\n          return React.createElement(Image, {\n            style: styles.avatar,\n            source: require(\"../assets/avatar/avatar_2.png\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 11\n            }\n          });\n        } else if (avatarHealth > 40 && avatarHealth <= 60) {\n          return React.createElement(Image, {\n            style: styles.avatar,\n            source: require(\"../assets/avatar/avatar_3.png\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 11\n            }\n          });\n        } else {\n          return React.createElement(Image, {\n            style: styles.avatar,\n            source: require(\"../assets/avatar/avatar_4.png\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 11\n            }\n          });\n        }\n      }\n    };\n\n    _this.state = {\n      avatarCharacter: 0,\n      avatarStatus: 0,\n      avatarHealth: 0,\n      backgroundColor: 5,\n      avatarCurrency: 0\n    };\n\n    if (!firebase.apps.length) {\n      firebase.initializeApp(ApiKeys.FirebaseConfig);\n    }\n\n    (function () {\n      return _this.readData();\n    });\n\n    return _this;\n  }\n\n  _createClass(HomeScreen, [{\n    key: \"readData\",\n    value: function readData() {\n      var _this2 = this;\n\n      fb.database().ref(\"response/\" + this.user._id + \"/avatarHealth\").once(\"value\", function (dataSnapShot) {\n        var tempHealth = dataSnapShot.val();\n\n        _this2.setState({\n          avatarHealth: tempHealth\n        });\n      });\n      fb.database().ref(\"response/\" + this.user._id + \"/avatarStatus\").once(\"value\", function (dataSnapShot) {\n        var tempStatus = dataSnapShot.val();\n\n        _this2.setState({\n          avatarStatus: tempStatus\n        });\n      });\n      fb.database().ref(\"response/\" + this.user._id + \"/character\").once(\"value\", function (querySnapShot) {\n        var data = querySnapShot.val() ? querySnapShot.val() : {};\n\n        _this2.setState({\n          avatarCharacter: data\n        });\n      });\n      fb.database().ref(\"response/\" + this.user._id + \"/backgroundColor\").once(\"value\", function (dataSnapShot) {\n        var tempColor = dataSnapShot.val();\n\n        _this2.setState({\n          backgroundColor: tempColor\n        });\n      });\n      fb.database().ref(\"response/\" + this.user._id + \"/currency\").once(\"value\", function (querySnapShot) {\n        var data = querySnapShot.val() ? querySnapShot.val() : {};\n\n        _this2.setState({\n          avatarCurrency: data\n        });\n      });\n    }\n  }, {\n    key: \"writeData\",\n    value: function writeData() {\n      firebase.database().ref(\"response/\" + this.user._id).update({\n        avatarHealth: this.state.avatarHealth\n      }).then(function () {\n        console.log(\"Health Reduced\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      this.timerID1 = setInterval(function () {\n        return _this3.readData();\n      }, 1000);\n      this.timerID1 = setInterval(function () {\n        return _this3.reduceHealth();\n      }, 50000);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.timerID1);\n    }\n  }, {\n    key: \"reduceHealth\",\n    value: function reduceHealth() {\n      if (this.state.avatarHealth > 0) {\n        this.setState(function (state) {\n          return {\n            avatarHealth: state.avatarHealth - 1\n          };\n        });\n      } else {\n        this.setState({\n          avatarHealth: 0\n        });\n      }\n\n      this.writeData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var background = getBackgroundImage(this.state.backgroundColor);\n      return React.createElement(SafeAreaView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 7\n        }\n      }, React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }\n      }, React.createElement(ImageBackground, {\n        source: background,\n        style: styles.backgroundImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, React.createElement(Header, {\n        props: this.props,\n        pageName: \"Home\",\n        baseCurrency: this.state.avatarCurrency,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }\n      }), React.createElement(View, {\n        style: styles.avatarContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.avatarDialogue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }, \"G'day, staying healthy? Do some quest chanllenges, read nutritional tips to keep fit!\"), React.createElement(this.handleAvatarHealthChange, {\n        health: this.state.avatarHealth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.textStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 19\n        }\n      }, \" Happiness Status \"), React.createElement(ProgressBar, {\n        progress: 1 * this.state.avatarStatus * 0.01,\n        color: Colors.lightBlue300,\n        style: {\n          width: 200,\n          height: 13\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 19\n        }\n      })), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }\n      }, \" \"), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.textStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 19\n        }\n      }, \" Emotion Status \"), React.createElement(ProgressBar, {\n        progress: 1 * this.state.avatarHealth * 0.01,\n        color: Colors.white,\n        style: {\n          width: 200,\n          height: 13\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 19\n        }\n      }))), React.createElement(View, {\n        style: styles.footMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }\n      }, React.createElement(View, {\n        style: styles.MainButtons,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.customBtnBG,\n        onPress: function onPress() {\n          return _this4.props.navigation.navigate(\"Quest\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.customBtnText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }\n      }, \"Quest\")), React.createElement(TouchableOpacity, {\n        style: styles.customBtnBG,\n        onPress: function onPress() {\n          return _this4.props.navigation.navigate(\"Nutritional\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.customBtnText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }, \"Nutrition\")), React.createElement(TouchableOpacity, {\n        style: styles.customBtnBG,\n        onPress: function onPress() {\n          return _this4.props.navigation.navigate(\"Shop\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.customBtnText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }\n      }, \"Shop\")), React.createElement(TouchableOpacity, {\n        style: styles.customBtnBG,\n        onPress: function onPress() {\n          return _this4.props.navigation.navigate(\"Chat\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.customBtnText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }\n      }, \"Socialize\"))))))));\n    }\n  }, {\n    key: \"user\",\n    get: function get() {\n      return {\n        _id: Fire.shared.uid\n      };\n    }\n  }]);\n\n  return HomeScreen;\n}(Component);\n\nexport { HomeScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#f0f8ff\",\n    flex: 1,\n    flexDirection: \"column\"\n  },\n  backgroundImage: {\n    flex: 1,\n    resizeMode: \"cover\",\n    justifyContent: \"center\"\n  },\n  avatarContainer: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  avatarDialogue: {\n    alignItems: \"center\",\n    backgroundColor: \"#E0E0E0\",\n    color: \"#000000\",\n    borderWidth: 0.5,\n    borderRadius: 10,\n    width: \"65%\",\n    marginTop: \"1%\",\n    justifyContent: \"center\",\n    fontSize: 16,\n    fontWeight: \"400\"\n  },\n  footMenu: {\n    flex: 0.1,\n    alignItems: \"stretch\",\n    justifyContent: \"space-evenly\",\n    flexDirection: \"column\",\n    margin: 20,\n    padding: 5,\n    marginBottom: \"5%\"\n  },\n  avatar: {\n    width: 220,\n    height: 220,\n    margin: 35\n  },\n  MainButtons: {\n    alignItems: \"center\",\n    alignContent: \"center\"\n  },\n  customBtnText: {\n    fontSize: 24,\n    fontWeight: \"300\",\n    color: \"#990000\",\n    textAlign: \"center\"\n  },\n  customBtnBG: {\n    backgroundColor: \"#FFE5CC\",\n    borderRadius: 5,\n    marginLeft: 15,\n    marginBottom: 10,\n    marginTop: 5,\n    width: 150,\n    height: 30,\n    flexDirection: \"column\"\n  },\n  textStyle: {\n    fontSize: 14,\n    fontWeight: \"500\",\n    color: \"#990000\",\n    textAlign: \"left\"\n  }\n});","map":{"version":3,"sources":["C:/Users/s4397674/Documents/PP/test/components/HomeScreen.js"],"names":["React","Component","ProgressBar","Colors","firebase","fb","Fire","images","getBackgroundImage","Header","HomeScreen","props","handleAvatarHealthChange","avatarHealth","health","avatarCharacter","state","styles","avatar","character1","character2","character3","require","avatarStatus","backgroundColor","avatarCurrency","apps","length","initializeApp","ApiKeys","FirebaseConfig","readData","database","ref","user","_id","once","dataSnapShot","tempHealth","val","setState","tempStatus","querySnapShot","data","tempColor","update","then","console","log","catch","error","timerID1","setInterval","reduceHealth","clearInterval","writeData","background","container","backgroundImage","avatarContainer","avatarDialogue","textStyle","lightBlue300","width","height","white","footMenu","MainButtons","customBtnBG","navigation","navigate","customBtnText","shared","uid","StyleSheet","create","flex","flexDirection","resizeMode","justifyContent","alignItems","color","borderWidth","borderRadius","marginTop","fontSize","fontWeight","margin","padding","marginBottom","alignContent","textAlign","marginLeft"],"mappings":";;;;;;;;;;;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;;;;;;;;;;AAaA,SAASC,WAAT,EAAsBC,MAAtB,QAAoC,oBAApC;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;AACA,SAASC,EAAT,EAAaC,IAAb;AACA,SAASC,MAAT,EAAiBC,kBAAjB;AACA,OAAOC,MAAP;;IAEqBC,U;;;;;AACnB,sBAAYC,MAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,MAAN;;AADiB,UAsBnBC,wBAtBmB,GAsBQ,UAACD,KAAD,EAAW;AACpC,UAAME,YAAY,GAAGF,KAAK,CAACG,MAA3B;AACA,UAAMC,eAAe,GAAG,MAAKC,KAAL,CAAWD,eAAnC;;AACA,UAAIA,eAAe,KAAK,CAAxB,EAA2B;AACzB,eAAO,oBAAC,KAAD;AAAO,UAAA,KAAK,EAAEE,MAAM,CAACC,MAArB;AAA6B,UAAA,MAAM,EAAEX,MAAM,CAACY,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFD,MAEO,IAAIJ,eAAe,KAAK,CAAxB,EAA2B;AAChC,eAAO,oBAAC,KAAD;AAAO,UAAA,KAAK,EAAEE,MAAM,CAACC,MAArB;AAA6B,UAAA,MAAM,EAAEX,MAAM,CAACa,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFM,MAEA,IAAIL,eAAe,KAAK,CAAxB,EAA2B;AAChC,eAAO,oBAAC,KAAD;AAAO,UAAA,KAAK,EAAEE,MAAM,CAACC,MAArB;AAA6B,UAAA,MAAM,EAAEX,MAAM,CAACc,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFM,MAEA;AACL,YAAIR,YAAY,GAAG,EAAnB,EAAuB;AACrB,iBACE,oBAAC,KAAD;AACE,YAAA,KAAK,EAAEI,MAAM,CAACC,MADhB;AAEE,YAAA,MAAM,EAAEI,OAAO,iCAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD,SAPD,MAOO,IAAIT,YAAY,GAAG,EAAf,IAAqBA,YAAY,IAAI,EAAzC,EAA6C;AAClD,iBACE,oBAAC,KAAD;AACE,YAAA,KAAK,EAAEI,MAAM,CAACC,MADhB;AAEE,YAAA,MAAM,EAAEI,OAAO,iCAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD,SAPM,MAOA,IAAIT,YAAY,GAAG,EAAf,IAAqBA,YAAY,IAAI,EAAzC,EAA6C;AAClD,iBACE,oBAAC,KAAD;AACE,YAAA,KAAK,EAAEI,MAAM,CAACC,MADhB;AAEE,YAAA,MAAM,EAAEI,OAAO,iCAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD,SAPM,MAOA;AACL,iBACE,oBAAC,KAAD;AACE,YAAA,KAAK,EAAEL,MAAM,CAACC,MADhB;AAEE,YAAA,MAAM,EAAEI,OAAO,iCAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;AACF;AACF,KA9DkB;;AAEjB,UAAKN,KAAL,GAAa;AACXD,MAAAA,eAAe,EAAE,CADN;AAEXQ,MAAAA,YAAY,EAAE,CAFH;AAGXV,MAAAA,YAAY,EAAE,CAHH;AAIXW,MAAAA,eAAe,EAAE,CAJN;AAKXC,MAAAA,cAAc,EAAE;AALL,KAAb;;AAOA,QAAI,CAACrB,QAAQ,CAACsB,IAAT,CAAcC,MAAnB,EAA2B;AACzBvB,MAAAA,QAAQ,CAACwB,aAAT,CAAuBC,OAAO,CAACC,cAA/B;AACD;;AACD;AAAA,aAAM,MAAKC,QAAL,EAAN;AAAA;;AAZiB;AAalB;;;;+BAkDU;AAAA;;AACT1B,MAAAA,EAAE,CAAC2B,QAAH,GACGC,GADH,CACO,cAAc,KAAKC,IAAL,CAAUC,GAAxB,GAA8B,eADrC,EAEGC,IAFH,CAEQ,OAFR,EAEiB,UAACC,YAAD,EAAkB;AAC/B,YAAIC,UAAU,GAAGD,YAAY,CAACE,GAAb,EAAjB;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AAAE3B,UAAAA,YAAY,EAAEyB;AAAhB,SAAd;AACD,OALH;AAMAjC,MAAAA,EAAE,CAAC2B,QAAH,GACGC,GADH,CACO,cAAc,KAAKC,IAAL,CAAUC,GAAxB,GAA8B,eADrC,EAEGC,IAFH,CAEQ,OAFR,EAEiB,UAACC,YAAD,EAAkB;AAC/B,YAAII,UAAU,GAAGJ,YAAY,CAACE,GAAb,EAAjB;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AAAEjB,UAAAA,YAAY,EAAEkB;AAAhB,SAAd;AACD,OALH;AAMApC,MAAAA,EAAE,CAAC2B,QAAH,GACGC,GADH,CACO,cAAc,KAAKC,IAAL,CAAUC,GAAxB,GAA8B,YADrC,EAEGC,IAFH,CAEQ,OAFR,EAEiB,UAACM,aAAD,EAAmB;AAChC,YAAIC,IAAI,GAAGD,aAAa,CAACH,GAAd,KAAsBG,aAAa,CAACH,GAAd,EAAtB,GAA4C,EAAvD;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AACZzB,UAAAA,eAAe,EAAE4B;AADL,SAAd;AAGD,OAPH;AAQAtC,MAAAA,EAAE,CAAC2B,QAAH,GACGC,GADH,CACO,cAAc,KAAKC,IAAL,CAAUC,GAAxB,GAA8B,kBADrC,EAEGC,IAFH,CAEQ,OAFR,EAEiB,UAACC,YAAD,EAAkB;AAC/B,YAAIO,SAAS,GAAGP,YAAY,CAACE,GAAb,EAAhB;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AAAEhB,UAAAA,eAAe,EAAEoB;AAAnB,SAAd;AACD,OALH;AAMAvC,MAAAA,EAAE,CAAC2B,QAAH,GACGC,GADH,CACO,cAAc,KAAKC,IAAL,CAAUC,GAAxB,GAA8B,WADrC,EAEGC,IAFH,CAEQ,OAFR,EAEiB,UAACM,aAAD,EAAmB;AAChC,YAAIC,IAAI,GAAGD,aAAa,CAACH,GAAd,KAAsBG,aAAa,CAACH,GAAd,EAAtB,GAA4C,EAAvD;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AACZf,UAAAA,cAAc,EAAEkB;AADJ,SAAd;AAGD,OAPH;AAQD;;;gCAEW;AACVvC,MAAAA,QAAQ,CACL4B,QADH,GAEGC,GAFH,CAEO,cAAc,KAAKC,IAAL,CAAUC,GAF/B,EAGGU,MAHH,CAGU;AACNhC,QAAAA,YAAY,EAAE,KAAKG,KAAL,CAAWH;AADnB,OAHV,EAMGiC,IANH,CAMQ,YAAM;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD,OARH,EASGC,KATH,CASS,UAACC,KAAD,EAAW;AAChBH,QAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,OAXH;AAYD;;;wCAEmB;AAAA;;AAClB,WAAKC,QAAL,GAAgBC,WAAW,CAAC;AAAA,eAAM,MAAI,CAACrB,QAAL,EAAN;AAAA,OAAD,EAAwB,IAAxB,CAA3B;AACA,WAAKoB,QAAL,GAAgBC,WAAW,CAAC;AAAA,eAAM,MAAI,CAACC,YAAL,EAAN;AAAA,OAAD,EAA4B,KAA5B,CAA3B;AACD;;;2CAEsB;AACrBC,MAAAA,aAAa,CAAC,KAAKH,QAAN,CAAb;AACD;;;mCAEc;AACb,UAAI,KAAKnC,KAAL,CAAWH,YAAX,GAA0B,CAA9B,EAAiC;AAC/B,aAAK2B,QAAL,CAAc,UAACxB,KAAD,EAAW;AACvB,iBAAO;AAAEH,YAAAA,YAAY,EAAEG,KAAK,CAACH,YAAN,GAAqB;AAArC,WAAP;AACD,SAFD;AAGD,OAJD,MAIO;AACL,aAAK2B,QAAL,CAAc;AAAE3B,UAAAA,YAAY,EAAE;AAAhB,SAAd;AACD;;AACD,WAAK0C,SAAL;AACD;;;6BAEQ;AAAA;;AACP,UAAMC,UAAU,GAAGhD,kBAAkB,CAAC,KAAKQ,KAAL,CAAWQ,eAAZ,CAArC;AACA,aACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEP,MAAM,CAACwC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAiB,QAAA,MAAM,EAAED,UAAzB;AAAqC,QAAA,KAAK,EAAEvC,MAAM,CAACyC,eAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAE,KAAK/C,KADd;AAEE,QAAA,QAAQ,EAAC,MAFX;AAGE,QAAA,YAAY,EAAE,KAAKK,KAAL,CAAWS,cAH3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAME,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAER,MAAM,CAAC0C,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE1C,MAAM,CAAC2C,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iGADF,EAKE,yBAAM,wBAAN;AACE,QAAA,MAAM,EAAE,KAAK5C,KAAL,CAAWH,YADrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,EAQE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEI,MAAM,CAAC4C,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,EAEE,oBAAC,WAAD;AACE,QAAA,QAAQ,EAAE,IAAI,KAAK7C,KAAL,CAAWO,YAAf,GAA8B,IAD1C;AAEE,QAAA,KAAK,EAAEpB,MAAM,CAAC2D,YAFhB;AAGE,QAAA,KAAK,EAAE;AACLC,UAAAA,KAAK,EAAE,GADF;AAELC,UAAAA,MAAM,EAAE;AAFH,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CARF,EAmBE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAnBF,EAoBE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE/C,MAAM,CAAC4C,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEE,oBAAC,WAAD;AACE,QAAA,QAAQ,EAAE,IAAI,KAAK7C,KAAL,CAAWH,YAAf,GAA8B,IAD1C;AAEE,QAAA,KAAK,EAAEV,MAAM,CAAC8D,KAFhB;AAGE,QAAA,KAAK,EAAE;AACLF,UAAAA,KAAK,EAAE,GADF;AAELC,UAAAA,MAAM,EAAE;AAFH,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CApBF,CANF,EAuCE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE/C,MAAM,CAACiD,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEjD,MAAM,CAACkD,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AACE,QAAA,KAAK,EAAElD,MAAM,CAACmD,WADhB;AAEE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACzD,KAAL,CAAW0D,UAAX,CAAsBC,QAAtB,CAA+B,OAA/B,CAAN;AAAA,SAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAErD,MAAM,CAACsD,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJF,CADF,EAQE,oBAAC,gBAAD;AACE,QAAA,KAAK,EAAEtD,MAAM,CAACmD,WADhB;AAEE,QAAA,OAAO,EAAE;AAAA,iBACP,MAAI,CAACzD,KAAL,CAAW0D,UAAX,CAAsBC,QAAtB,CAA+B,aAA/B,CADO;AAAA,SAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAME,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAErD,MAAM,CAACsD,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBANF,CARF,EAiBE,oBAAC,gBAAD;AACE,QAAA,KAAK,EAAEtD,MAAM,CAACmD,WADhB;AAEE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACzD,KAAL,CAAW0D,UAAX,CAAsBC,QAAtB,CAA+B,MAA/B,CAAN;AAAA,SAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAErD,MAAM,CAACsD,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,CAjBF,EAwBE,oBAAC,gBAAD;AACE,QAAA,KAAK,EAAEtD,MAAM,CAACmD,WADhB;AAEE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACzD,KAAL,CAAW0D,UAAX,CAAsBC,QAAtB,CAA+B,MAA/B,CAAN;AAAA,SAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAErD,MAAM,CAACsD,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJF,CAxBF,CADF,CAvCF,CADF,CADF,CADF,CADF;AAiFD;;;wBA3MU;AACT,aAAO;AAELpC,QAAAA,GAAG,EAAE7B,IAAI,CAACkE,MAAL,CAAYC;AAFZ,OAAP;AAID;;;;EArBqCxE,S;;SAAnBS,U;AA8NrB,IAAMO,MAAM,GAAGyD,UAAU,CAACC,MAAX,CAAkB;AAC/BlB,EAAAA,SAAS,EAAE;AACTjC,IAAAA,eAAe,EAAE,SADR;AAEToD,IAAAA,IAAI,EAAE,CAFG;AAGTC,IAAAA,aAAa,EAAE;AAHN,GADoB;AAO/BnB,EAAAA,eAAe,EAAE;AACfkB,IAAAA,IAAI,EAAE,CADS;AAEfE,IAAAA,UAAU,EAAE,OAFG;AAGfC,IAAAA,cAAc,EAAE;AAHD,GAPc;AAa/BpB,EAAAA,eAAe,EAAE;AACfiB,IAAAA,IAAI,EAAE,CADS;AAEfI,IAAAA,UAAU,EAAE,QAFG;AAGfD,IAAAA,cAAc,EAAE;AAHD,GAbc;AAmB/BnB,EAAAA,cAAc,EAAE;AACdoB,IAAAA,UAAU,EAAE,QADE;AAEdxD,IAAAA,eAAe,EAAE,SAFH;AAGdyD,IAAAA,KAAK,EAAE,SAHO;AAIdC,IAAAA,WAAW,EAAE,GAJC;AAKdC,IAAAA,YAAY,EAAE,EALA;AAMdpB,IAAAA,KAAK,EAAE,KANO;AAOdqB,IAAAA,SAAS,EAAE,IAPG;AAQdL,IAAAA,cAAc,EAAE,QARF;AASdM,IAAAA,QAAQ,EAAE,EATI;AAUdC,IAAAA,UAAU,EAAE;AAVE,GAnBe;AAgC/BpB,EAAAA,QAAQ,EAAE;AACRU,IAAAA,IAAI,EAAE,GADE;AAERI,IAAAA,UAAU,EAAE,SAFJ;AAGRD,IAAAA,cAAc,EAAE,cAHR;AAIRF,IAAAA,aAAa,EAAE,QAJP;AAKRU,IAAAA,MAAM,EAAE,EALA;AAMRC,IAAAA,OAAO,EAAE,CAND;AAORC,IAAAA,YAAY,EAAE;AAPN,GAhCqB;AA0C/BvE,EAAAA,MAAM,EAAE;AACN6C,IAAAA,KAAK,EAAE,GADD;AAENC,IAAAA,MAAM,EAAE,GAFF;AAGNuB,IAAAA,MAAM,EAAE;AAHF,GA1CuB;AAgD/BpB,EAAAA,WAAW,EAAE;AACXa,IAAAA,UAAU,EAAE,QADD;AAEXU,IAAAA,YAAY,EAAE;AAFH,GAhDkB;AAqD/BnB,EAAAA,aAAa,EAAE;AACbc,IAAAA,QAAQ,EAAE,EADG;AAEbC,IAAAA,UAAU,EAAE,KAFC;AAGbL,IAAAA,KAAK,EAAE,SAHM;AAIbU,IAAAA,SAAS,EAAE;AAJE,GArDgB;AA4D/BvB,EAAAA,WAAW,EAAE;AACX5C,IAAAA,eAAe,EAAE,SADN;AAEX2D,IAAAA,YAAY,EAAE,CAFH;AAGXS,IAAAA,UAAU,EAAE,EAHD;AAIXH,IAAAA,YAAY,EAAE,EAJH;AAKXL,IAAAA,SAAS,EAAE,CALA;AAMXrB,IAAAA,KAAK,EAAE,GANI;AAOXC,IAAAA,MAAM,EAAE,EAPG;AAQXa,IAAAA,aAAa,EAAE;AARJ,GA5DkB;AAuE/BhB,EAAAA,SAAS,EAAE;AACTwB,IAAAA,QAAQ,EAAE,EADD;AAETC,IAAAA,UAAU,EAAE,KAFH;AAGTL,IAAAA,KAAK,EAAE,SAHE;AAITU,IAAAA,SAAS,EAAE;AAJF;AAvEoB,CAAlB,CAAf","sourcesContent":["// Homescreen.js\r\n\r\nimport React, { Component } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  ImageBackground,\r\n  Text,\r\n  Image,\r\n  View,\r\n  SafeAreaView,\r\n  ScrollView,\r\n  Button,\r\n  Alert,\r\n  TouchableOpacity,\r\n} from \"react-native\";\r\nimport { ProgressBar, Colors } from \"react-native-paper\";\r\nimport * as firebase from \"firebase\";\r\nimport { fb, Fire } from \"../src/firebase/APIKeys\";\r\nimport { images, getBackgroundImage } from \"../components/images\";\r\nimport Header from \"../components/Header\";\r\n\r\nexport default class HomeScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      avatarCharacter: 0,\r\n      avatarStatus: 0,\r\n      avatarHealth: 0,\r\n      backgroundColor: 5,\r\n      avatarCurrency: 0,\r\n    };\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(ApiKeys.FirebaseConfig);\r\n    }\r\n    () => this.readData();\r\n  }\r\n\r\n  get user() {\r\n    return {\r\n      //   name: this.props.navigation.state.params.name,\r\n      _id: Fire.shared.uid,\r\n    };\r\n  }\r\n\r\n  handleAvatarHealthChange = (props) => {\r\n    const avatarHealth = props.health;\r\n    const avatarCharacter = this.state.avatarCharacter;\r\n    if (avatarCharacter === 1) {\r\n      return <Image style={styles.avatar} source={images.character1} />;\r\n    } else if (avatarCharacter === 2) {\r\n      return <Image style={styles.avatar} source={images.character2} />;\r\n    } else if (avatarCharacter === 3) {\r\n      return <Image style={styles.avatar} source={images.character3} />;\r\n    } else {\r\n      if (avatarHealth > 80) {\r\n        return (\r\n          <Image\r\n            style={styles.avatar}\r\n            source={require(\"../assets/avatar/avatar_1.png\")}\r\n          />\r\n        );\r\n      } else if (avatarHealth > 60 && avatarHealth <= 80) {\r\n        return (\r\n          <Image\r\n            style={styles.avatar}\r\n            source={require(\"../assets/avatar/avatar_2.png\")}\r\n          />\r\n        );\r\n      } else if (avatarHealth > 40 && avatarHealth <= 60) {\r\n        return (\r\n          <Image\r\n            style={styles.avatar}\r\n            source={require(\"../assets/avatar/avatar_3.png\")}\r\n          />\r\n        );\r\n      } else {\r\n        return (\r\n          <Image\r\n            style={styles.avatar}\r\n            source={require(\"../assets/avatar/avatar_4.png\")}\r\n          />\r\n        );\r\n      }\r\n    }\r\n  };\r\n  readData() {\r\n    fb.database()\r\n      .ref(\"response/\" + this.user._id + \"/avatarHealth\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var tempHealth = dataSnapShot.val();\r\n        this.setState({ avatarHealth: tempHealth });\r\n      });\r\n    fb.database()\r\n      .ref(\"response/\" + this.user._id + \"/avatarStatus\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var tempStatus = dataSnapShot.val();\r\n        this.setState({ avatarStatus: tempStatus });\r\n      });\r\n    fb.database()\r\n      .ref(\"response/\" + this.user._id + \"/character\")\r\n      .once(\"value\", (querySnapShot) => {\r\n        let data = querySnapShot.val() ? querySnapShot.val() : {};\r\n        this.setState({\r\n          avatarCharacter: data,\r\n        });\r\n      });\r\n    fb.database()\r\n      .ref(\"response/\" + this.user._id + \"/backgroundColor\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var tempColor = dataSnapShot.val();\r\n        this.setState({ backgroundColor: tempColor });\r\n      });\r\n    fb.database()\r\n      .ref(\"response/\" + this.user._id + \"/currency\")\r\n      .once(\"value\", (querySnapShot) => {\r\n        let data = querySnapShot.val() ? querySnapShot.val() : {};\r\n        this.setState({\r\n          avatarCurrency: data,\r\n        });\r\n      });\r\n  }\r\n\r\n  writeData() {\r\n    firebase\r\n      .database()\r\n      .ref(\"response/\" + this.user._id)\r\n      .update({\r\n        avatarHealth: this.state.avatarHealth,\r\n      })\r\n      .then(() => {\r\n        console.log(\"Health Reduced\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.timerID1 = setInterval(() => this.readData(), 1000);\r\n    this.timerID1 = setInterval(() => this.reduceHealth(), 50000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timerID1);\r\n  }\r\n\r\n  reduceHealth() {\r\n    if (this.state.avatarHealth > 0) {\r\n      this.setState((state) => {\r\n        return { avatarHealth: state.avatarHealth - 1 };\r\n      });\r\n    } else {\r\n      this.setState({ avatarHealth: 0 });\r\n    }\r\n    this.writeData();\r\n  }\r\n\r\n  render() {\r\n    const background = getBackgroundImage(this.state.backgroundColor);\r\n    return (\r\n      <SafeAreaView>\r\n        <ScrollView>\r\n          <View style={styles.container}>\r\n            <ImageBackground source={background} style={styles.backgroundImage}>\r\n              <Header\r\n                props={this.props}\r\n                pageName=\"Home\"\r\n                baseCurrency={this.state.avatarCurrency}\r\n              />\r\n              <View style={styles.avatarContainer}>\r\n                <Text style={styles.avatarDialogue}>\r\n                  G'day, staying healthy? Do some quest chanllenges, read\r\n                  nutritional tips to keep fit!\r\n                </Text>\r\n                <this.handleAvatarHealthChange\r\n                  health={this.state.avatarHealth}\r\n                />\r\n                <View>\r\n                  <Text style={styles.textStyle}> Happiness Status </Text>\r\n                  <ProgressBar\r\n                    progress={1 * this.state.avatarStatus * 0.01}\r\n                    color={Colors.lightBlue300}\r\n                    style={{\r\n                      width: 200,\r\n                      height: 13,\r\n                    }}\r\n                  />\r\n                </View>\r\n                <Text> </Text>\r\n                <View>\r\n                  <Text style={styles.textStyle}> Emotion Status </Text>\r\n                  <ProgressBar\r\n                    progress={1 * this.state.avatarHealth * 0.01}\r\n                    color={Colors.white}\r\n                    style={{\r\n                      width: 200,\r\n                      height: 13,\r\n                    }}\r\n                  />\r\n                </View>\r\n              </View>\r\n\r\n              <View style={styles.footMenu}>\r\n                <View style={styles.MainButtons}>\r\n                  <TouchableOpacity\r\n                    style={styles.customBtnBG}\r\n                    onPress={() => this.props.navigation.navigate(\"Quest\")}\r\n                  >\r\n                    <Text style={styles.customBtnText}>Quest</Text>\r\n                  </TouchableOpacity>\r\n\r\n                  <TouchableOpacity\r\n                    style={styles.customBtnBG}\r\n                    onPress={() =>\r\n                      this.props.navigation.navigate(\"Nutritional\")\r\n                    }\r\n                  >\r\n                    <Text style={styles.customBtnText}>Nutrition</Text>\r\n                  </TouchableOpacity>\r\n\r\n                  <TouchableOpacity\r\n                    style={styles.customBtnBG}\r\n                    onPress={() => this.props.navigation.navigate(\"Shop\")}\r\n                  >\r\n                    <Text style={styles.customBtnText}>Shop</Text>\r\n                  </TouchableOpacity>\r\n\r\n                  <TouchableOpacity\r\n                    style={styles.customBtnBG}\r\n                    onPress={() => this.props.navigation.navigate(\"Chat\")}\r\n                  >\r\n                    <Text style={styles.customBtnText}>Socialize</Text>\r\n                  </TouchableOpacity>\r\n                </View>\r\n              </View>\r\n            </ImageBackground>\r\n          </View>\r\n        </ScrollView>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#f0f8ff\",\r\n    flex: 1,\r\n    flexDirection: \"column\",\r\n  },\r\n\r\n  backgroundImage: {\r\n    flex: 1,\r\n    resizeMode: \"cover\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  avatarContainer: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  avatarDialogue: {\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#E0E0E0\",\r\n    color: \"#000000\",\r\n    borderWidth: 0.5,\r\n    borderRadius: 10,\r\n    width: \"65%\",\r\n    marginTop: \"1%\",\r\n    justifyContent: \"center\",\r\n    fontSize: 16,\r\n    fontWeight: \"400\",\r\n  },\r\n\r\n  footMenu: {\r\n    flex: 0.1,\r\n    alignItems: \"stretch\",\r\n    justifyContent: \"space-evenly\",\r\n    flexDirection: \"column\",\r\n    margin: 20,\r\n    padding: 5,\r\n    marginBottom: \"5%\",\r\n  },\r\n\r\n  avatar: {\r\n    width: 220,\r\n    height: 220,\r\n    margin: 35,\r\n  },\r\n\r\n  MainButtons: {\r\n    alignItems: \"center\",\r\n    alignContent: \"center\",\r\n  },\r\n\r\n  customBtnText: {\r\n    fontSize: 24,\r\n    fontWeight: \"300\",\r\n    color: \"#990000\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  customBtnBG: {\r\n    backgroundColor: \"#FFE5CC\",\r\n    borderRadius: 5,\r\n    marginLeft: 15,\r\n    marginBottom: 10,\r\n    marginTop: 5,\r\n    width: 150,\r\n    height: 30,\r\n    flexDirection: \"column\",\r\n  },\r\n\r\n  textStyle: {\r\n    fontSize: 14,\r\n    fontWeight: \"500\",\r\n    color: \"#990000\",\r\n    textAlign: \"left\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}