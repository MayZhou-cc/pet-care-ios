{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\s4397674\\\\Documents\\\\PP\\\\test\\\\components\\\\NutritionalScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport { FontAwesome } from \"@expo/vector-icons\";\nimport React, { Component, useState, useEffect, useCallback } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { createAppContainer } from \"react-navigation\";\nimport { createMaterialTopTabNavigator } from \"react-navigation-tabs\";\nimport { fb, Fire } from \"../src/firebase/APIKeys\";\nimport * as firebase from \"firebase\";\nimport { getBackgroundImage } from \"../components/images\";\nimport Header from \"../components/Header\";\nvar baseHealth = 0;\nvar baseStatus = 0;\nvar baseCurrency = 0;\nvar userid = Fire.shared.user._id;\nconsole.log(userid);\n\n(function () {\n  return readData();\n});\n\nfunction readData() {\n  console.log(userid);\n  firebase.database().ref(\"response/\" + userid + \"/avatarHealth\").once(\"value\", function (dataSnapShot) {\n    baseHealth = dataSnapShot.val();\n  });\n  firebase.database().ref(\"response/\" + userid + \"/avatarStatus\").once(\"value\", function (dataSnapShot) {\n    baseStatus = dataSnapShot.val();\n  });\n  firebase.database().ref(\"response/\" + userid + \"/currency\").once(\"value\", function (dataSnapShot) {\n    baseCurrency = dataSnapShot.val();\n  });\n}\n\nfunction ReadTab() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      read = _useState2[0],\n      allReads = _useState2[1];\n\n  useEffect(function () {\n    var readRef = firebase.database().ref(\"response/\" + userid + \"/nutritionalTips\");\n    var OnLoadingListener = readRef.on(\"value\", function (snapshot) {\n      allReads([]);\n      snapshot.forEach(function (childSnapshot) {\n        allReads(function (read) {\n          return [].concat(_toConsumableArray(read), [childSnapshot.val()]);\n        });\n      });\n    });\n    return function () {\n      readRef.off(\"value\", OnLoadingListener);\n    };\n  }, []);\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, React.createElement(SafeAreaView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, read.map(function (item) {\n    if (item[\"complete\"]) {\n      return React.createElement(TouchableOpacity, {\n        key: item[\"tipID\"],\n        style: styles.textContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.taskTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 19\n        }\n      }, item[\"tipName\"]), React.createElement(Text, {\n        style: styles.text,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 19\n        }\n      }, \"Description: \", item[\"tip\"]), React.createElement(Text, {\n        style: styles.rewardText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 19\n        }\n      }, \"+\", item[\"tipReward\"][\"shopCurrency\"], \" \", React.createElement(FontAwesome, {\n        name: \"dollar\",\n        size: 20,\n        color: \"orange\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }\n      })));\n    }\n  }))));\n}\n\nReadTab.navigationOptions = {\n  tabBarIcon: function tabBarIcon(_ref) {\n    var tintColor = _ref.tintColor,\n        focused = _ref.focused;\n    return React.createElement(Icon, {\n      name: focused ? \"ios-mail-open\" : \"md-mail-open\",\n      color: tintColor,\n      size: 25,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }\n    });\n  }\n};\n\nvar submitTip = function submitTip(id, name, tip, type, reward, complete) {\n  return new Promise(function (resolve, reject) {\n    var key;\n\n    if (id != null) {\n      key = id;\n    } else {\n      key = fb.database().ref().push().key;\n    }\n\n    var dataToSave = {\n      tipID: key,\n      tipName: name,\n      complete: complete,\n      tipReward: reward,\n      tip: tip,\n      tipType: type\n    };\n    console.log(dataToSave);\n    fb.database().ref(\"response/\" + userid + \"/nutritionalTips/\" + key).update(dataToSave).then(function (snapshot) {\n      resolve(snapshot);\n    }).catch(function (err) {\n      reject(err);\n    });\n  });\n};\n\nfunction completeTips(rewardHealth) {\n  var _this = this;\n\n  baseHealth += rewardHealth[\"avatarHealth\"];\n  baseStatus += rewardHealth[\"avatarStatus\"];\n  baseCurrency += rewardHealth[\"shopCurrency\"];\n  this.setState(function (state, props) {\n    return {\n      baseHealth: _this.state.baseHealth + rewardHealth[\"avatarHealth\"],\n      baseCurr: _this.state.baseCurr + rewardHealth[\"shopCurrency\"],\n      baseStatus: _this.state.baseStatus + rewardHealth[\"avatarStatus\"]\n    };\n  });\n  fb.database().ref(\"response/\" + userid + \"/\").update({\n    avatarHealth: baseHealth,\n    avatarStatus: baseStatus,\n    currency: baseCurrency\n  }).then(function () {\n    console.log(\"Read a nutritional tip. Congrats!\");\n  }).catch(function (error) {\n    console.log(error);\n  });\n}\n\nfunction reading(item) {\n  Alert.alert(item[\"tipName\"], item[\"tip\"], [{\n    text: \"Cancel\",\n    onPress: function onPress() {\n      return console.log(\"cancel\");\n    },\n    style: \"cancel\"\n  }, {\n    text: \"OK\",\n    onPress: function onPress() {\n      completeTips(item[\"tipReward\"]);\n      submitTip(item[\"tipID\"], item[\"tipName\"], item[\"tip\"], item[\"tipType\"], item[\"tipReward\"], !item[\"complete\"]);\n    }\n  }], {\n    cancelable: false\n  });\n}\n\nfunction UnreadTab() {\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      unread = _useState4[0],\n      allUnreads = _useState4[1];\n\n  useEffect(function () {\n    var unreadRef = firebase.database().ref(\"/response/\" + userid + \"/nutritionalTips/\");\n    var OnLoadingListener = unreadRef.on(\"value\", function (snapshot) {\n      allUnreads([]);\n      snapshot.forEach(function (childSnapshot) {\n        allUnreads(function (unread) {\n          return [].concat(_toConsumableArray(unread), [childSnapshot.val()]);\n        });\n      });\n    });\n    return function () {\n      unreadRef.off(\"value\", OnLoadingListener);\n    };\n  }, []);\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }\n  }, React.createElement(SafeAreaView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, unread.map(function (item) {\n    if (!item[\"complete\"]) {\n      return React.createElement(TouchableOpacity, {\n        key: item[\"tipID\"],\n        style: styles.textContainer,\n        onPress: function onPress() {\n          return reading(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.taskTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 19\n        }\n      }, item[\"tipName\"]), React.createElement(Text, {\n        style: styles.text,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 19\n        }\n      }, \"Description: \", item[\"tip\"]), React.createElement(Text, {\n        style: styles.rewardText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 19\n        }\n      }, \"+\", item[\"tipReward\"][\"shopCurrency\"], \" \", React.createElement(FontAwesome, {\n        name: \"dollar\",\n        size: 20,\n        color: \"orange\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }\n      })));\n    }\n  }))));\n}\n\nUnreadTab.navigationOptions = {\n  tabBarIcon: function tabBarIcon(_ref2) {\n    var tintColor = _ref2.tintColor,\n        focused = _ref2.focused;\n    return React.createElement(Icon, {\n      name: focused ? \"ios-mail-unread\" : \"md-mail-unread\",\n      color: tintColor,\n      size: 25,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 5\n      }\n    });\n  }\n};\nvar Tab = createMaterialTopTabNavigator({\n  Unread: UnreadTab,\n  Read: ReadTab\n}, {\n  tabBarOptions: {\n    activeTintColor: \"black\",\n    showIcon: true,\n    showLabel: true,\n    style: {\n      backgroundColor: \"transparent\"\n    }\n  }\n});\nvar AppIndex = createAppContainer(Tab);\n\nvar NutritionalScreen = function (_Component) {\n  _inherits(NutritionalScreen, _Component);\n\n  var _super = _createSuper(NutritionalScreen);\n\n  function NutritionalScreen(props) {\n    var _this2;\n\n    _classCallCheck(this, NutritionalScreen);\n\n    _this2 = _super.call(this, props);\n\n    _this2.handleCurrency = function () {\n      return React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 12\n        }\n      }, baseCurrency);\n    };\n\n    _this2.state = {\n      baseHealth: 0,\n      baseStatus: 0,\n      baseCurr: 0,\n      backgroundColor: 5\n    };\n\n    if (!firebase.apps.length) {\n      firebase.initializeApp(ApiKeys.FirebaseConfig);\n    }\n\n    (function () {\n      return _this2.readData();\n    });\n\n    completeTips = completeTips.bind(_assertThisInitialized(_this2));\n    reading = reading.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  _createClass(NutritionalScreen, [{\n    key: \"readData\",\n    value: function readData() {\n      var _this3 = this;\n\n      console.log(\"reading data in nutritional tip \" + userid);\n      firebase.database().ref(\"response/\" + userid + \"/avatarHealth\").once(\"value\", function (dataSnapShot) {\n        var temp = dataSnapShot.val();\n        baseHealth = temp;\n\n        _this3.setState({\n          baseHealth: temp\n        });\n      });\n      firebase.database().ref(\"response/\" + userid + \"/avatarStatus\").once(\"value\", function (dataSnapShot) {\n        var temp = dataSnapShot.val();\n        baseStatus = temp;\n\n        _this3.setState({\n          baseStatus: temp\n        });\n      });\n      firebase.database().ref(\"response/\" + userid + \"/currency\").once(\"value\", function (dataSnapShot) {\n        var temp = dataSnapShot.val();\n        baseCurrency = temp;\n\n        _this3.setState({\n          baseCurr: temp\n        });\n      });\n      firebase.database().ref(\"response/\" + userid + \"/backgroundColor\").once(\"value\", function (dataSnapShot) {\n        var tempColor = dataSnapShot.val();\n\n        _this3.setState({\n          backgroundColor: tempColor\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      userid = Fire.shared.user._id;\n      this.readData();\n      readData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var background = getBackgroundImage(this.state.backgroundColor);\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 7\n        }\n      }, React.createElement(ImageBackground, {\n        source: background,\n        style: styles.backgroundImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 9\n        }\n      }, React.createElement(Header, {\n        props: this.props,\n        pageName: \"Home\",\n        baseCurrency: baseCurrency,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }\n      }), React.createElement(AppIndex, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return NutritionalScreen;\n}(Component);\n\nexport { NutritionalScreen as default };\n{}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#5F7EB2\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  textContainer: {\n    padding: 10,\n    marginTop: 3,\n    backgroundColor: \"white\",\n    alignItems: \"center\"\n  },\n  backgroundImage: {\n    flex: 1,\n    resizeMode: \"cover\",\n    justifyContent: \"center\"\n  },\n  text: {\n    color: \"#4f603c\",\n    fontSize: 14,\n    margin: 3\n  },\n  taskCard: {\n    flex: 5,\n    backgroundColor: \"#FFE5CC\",\n    borderColor: \"black\",\n    borderWidth: 1,\n    margin: 10,\n    justifyContent: \"center\"\n  },\n  taskDiv: {\n    flex: 1,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  rewardPoint: {\n    fontSize: 20,\n    color: \"darkblue\"\n  },\n  taskbody: {\n    flex: 1,\n    fontSize: 14\n  },\n  taskDone: {\n    borderColor: \"#737373\",\n    backgroundColor: \"darkgrey\"\n  },\n  header: {\n    flexDirection: \"row\"\n  },\n  tabs: {\n    flex: 1,\n    backgroundColor: \"#D3E3F6\",\n    alignItems: \"flex-start\",\n    justifyContent: \"flex-start\",\n    textAlign: \"left\"\n  },\n  taskTitle: {\n    fontSize: 20,\n    margin: 5\n  },\n  rewardText: {\n    margin: 5,\n    fontSize: 20,\n    textAlign: \"right\",\n    alignSelf: \"flex-end\",\n    fontWeight: \"400\"\n  }\n});","map":{"version":3,"sources":["C:/Users/s4397674/Documents/PP/test/components/NutritionalScreen.js"],"names":["Icon","FontAwesome","React","Component","useState","useEffect","useCallback","createAppContainer","createMaterialTopTabNavigator","fb","Fire","firebase","getBackgroundImage","Header","baseHealth","baseStatus","baseCurrency","userid","shared","user","_id","console","log","readData","database","ref","once","dataSnapShot","val","ReadTab","read","allReads","readRef","OnLoadingListener","on","snapshot","forEach","childSnapshot","off","map","item","styles","textContainer","taskTitle","text","rewardText","navigationOptions","tabBarIcon","tintColor","focused","submitTip","id","name","tip","type","reward","complete","Promise","resolve","reject","key","push","dataToSave","tipID","tipName","tipReward","tipType","update","then","catch","err","completeTips","rewardHealth","setState","state","props","baseCurr","avatarHealth","avatarStatus","currency","error","reading","Alert","alert","onPress","style","cancelable","UnreadTab","unread","allUnreads","unreadRef","Tab","Unread","Read","tabBarOptions","activeTintColor","showIcon","showLabel","backgroundColor","AppIndex","NutritionalScreen","handleCurrency","fontSize","color","apps","length","initializeApp","ApiKeys","FirebaseConfig","bind","temp","tempColor","background","flex","backgroundImage","StyleSheet","create","container","alignItems","justifyContent","padding","marginTop","resizeMode","margin","taskCard","borderColor","borderWidth","taskDiv","flexDirection","rewardPoint","taskbody","taskDone","header","tabs","textAlign","alignSelf","fontWeight"],"mappings":"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","sourcesContent":["//NutritionScreen.js\r\n\r\nimport Icon from \"react-native-vector-icons/Ionicons\";\r\nimport { FontAwesome } from \"@expo/vector-icons\";\r\nimport React, { Component, useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  TouchableOpacity,\r\n  ImageBackground,\r\n  SafeAreaView,\r\n  ScrollView,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { createAppContainer } from \"react-navigation\";\r\nimport { createMaterialTopTabNavigator } from \"react-navigation-tabs\";\r\nimport { fb, Fire } from \"../src/firebase/APIKeys\";\r\nimport * as firebase from \"firebase\";\r\nimport { getBackgroundImage } from \"../components/images\";\r\nimport Header from \"../components/Header\";\r\n\r\nvar baseHealth = 0;\r\nvar baseStatus = 0;\r\nvar baseCurrency = 0;\r\nvar userid = Fire.shared.user._id;\r\nconsole.log(userid);\r\n() => readData();\r\n\r\nfunction readData() {\r\n  console.log(userid);\r\n  firebase\r\n    .database()\r\n    .ref(\"response/\" + userid + \"/avatarHealth\")\r\n    .once(\"value\", (dataSnapShot) => {\r\n      baseHealth = dataSnapShot.val();\r\n    });\r\n  firebase\r\n    .database()\r\n    .ref(\"response/\" + userid + \"/avatarStatus\")\r\n    .once(\"value\", (dataSnapShot) => {\r\n      baseStatus = dataSnapShot.val();\r\n    });\r\n  firebase\r\n    .database()\r\n    .ref(\"response/\" + userid + \"/currency\")\r\n    .once(\"value\", (dataSnapShot) => {\r\n      baseCurrency = dataSnapShot.val();\r\n    });\r\n}\r\n\r\nfunction ReadTab() {\r\n  const [read, allReads] = useState([]);\r\n  useEffect(() => {\r\n    const readRef = firebase\r\n      .database()\r\n      .ref(\"response/\" + userid + \"/nutritionalTips\");\r\n    const OnLoadingListener = readRef.on(\"value\", (snapshot) => {\r\n      allReads([]);\r\n      snapshot.forEach(function (childSnapshot) {\r\n        allReads((read) => [...read, childSnapshot.val()]);\r\n      });\r\n    });\r\n    return () => {\r\n      readRef.off(\"value\", OnLoadingListener);\r\n    };\r\n  }, []);\r\n  return (\r\n    <View>\r\n      <SafeAreaView>\r\n        <ScrollView>\r\n          {read.map(function (item) {\r\n            if (item[\"complete\"]) {\r\n              return (\r\n                <TouchableOpacity\r\n                  key={item[\"tipID\"]}\r\n                  style={styles.textContainer}\r\n                >\r\n                  {/* <Text style={styles.text}>Type: {item[\"tipType\"]}</Text> */}\r\n                  <Text style={styles.taskTitle}>{item[\"tipName\"]}</Text>\r\n                  <Text style={styles.text}>Description: {item[\"tip\"]}</Text>\r\n                  <Text style={styles.rewardText}>\r\n                    +{item[\"tipReward\"][\"shopCurrency\"]}{\" \"}\r\n                    <FontAwesome name=\"dollar\" size={20} color=\"orange\" />\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              );\r\n            }\r\n          })}\r\n        </ScrollView>\r\n      </SafeAreaView>\r\n    </View>\r\n  );\r\n}\r\nReadTab.navigationOptions = {\r\n  tabBarIcon: ({ tintColor, focused }) => (\r\n    <Icon\r\n      name={focused ? \"ios-mail-open\" : \"md-mail-open\"}\r\n      color={tintColor}\r\n      size={25}\r\n    />\r\n  ),\r\n};\r\n\r\n// Update tip after the tip has been read\r\nconst submitTip = (id, name, tip, type, reward, complete) => {\r\n  return new Promise(function (resolve, reject) {\r\n    let key;\r\n    if (id != null) {\r\n      key = id;\r\n    } else {\r\n      key = fb.database().ref().push().key;\r\n    }\r\n    let dataToSave = {\r\n      tipID: key,\r\n      tipName: name,\r\n      complete: complete,\r\n      tipReward: reward,\r\n      tip: tip,\r\n      tipType: type,\r\n    };\r\n    console.log(dataToSave);\r\n    fb.database()\r\n      .ref(\"response/\" + userid + \"/nutritionalTips/\" + key)\r\n      .update(dataToSave)\r\n      .then((snapshot) => {\r\n        resolve(snapshot);\r\n      })\r\n      .catch((err) => {\r\n        reject(err);\r\n      });\r\n  });\r\n};\r\n\r\nfunction completeTips(rewardHealth) {\r\n  baseHealth += rewardHealth[\"avatarHealth\"];\r\n  baseStatus += rewardHealth[\"avatarStatus\"];\r\n  baseCurrency += rewardHealth[\"shopCurrency\"];\r\n  this.setState((state, props) => ({\r\n    baseHealth: this.state.baseHealth + rewardHealth[\"avatarHealth\"],\r\n    baseCurr: this.state.baseCurr + rewardHealth[\"shopCurrency\"],\r\n    baseStatus: this.state.baseStatus + rewardHealth[\"avatarStatus\"],\r\n  }));\r\n  fb.database()\r\n    .ref(\"response/\" + userid + \"/\")\r\n    .update({\r\n      avatarHealth: baseHealth,\r\n      avatarStatus: baseStatus,\r\n      currency: baseCurrency,\r\n    })\r\n    .then(() => {\r\n      console.log(\"Read a nutritional tip. Congrats!\");\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\n// Reading Alert to verify if the tip is read.\r\nfunction reading(item) {\r\n  Alert.alert(\r\n    item[\"tipName\"],\r\n    item[\"tip\"],\r\n    [\r\n      {\r\n        text: \"Cancel\",\r\n        onPress: () => console.log(\"cancel\"),\r\n        style: \"cancel\",\r\n      },\r\n      {\r\n        text: \"OK\",\r\n        onPress: () => {\r\n          completeTips(item[\"tipReward\"]);\r\n          submitTip(\r\n            item[\"tipID\"],\r\n            item[\"tipName\"],\r\n            item[\"tip\"],\r\n            item[\"tipType\"],\r\n            item[\"tipReward\"],\r\n            !item[\"complete\"]\r\n          );\r\n        },\r\n      },\r\n    ],\r\n    { cancelable: false }\r\n  );\r\n}\r\nfunction UnreadTab() {\r\n  const [unread, allUnreads] = useState([]);\r\n  useEffect(() => {\r\n    const unreadRef = firebase\r\n      .database()\r\n      .ref(\"/response/\" + userid + \"/nutritionalTips/\");\r\n    const OnLoadingListener = unreadRef.on(\"value\", (snapshot) => {\r\n      allUnreads([]);\r\n      snapshot.forEach(function (childSnapshot) {\r\n        allUnreads((unread) => [...unread, childSnapshot.val()]);\r\n      });\r\n    });\r\n    return () => {\r\n      unreadRef.off(\"value\", OnLoadingListener);\r\n    };\r\n  }, []);\r\n  return (\r\n    <View>\r\n      <SafeAreaView>\r\n        <ScrollView>\r\n          {unread.map(function (item) {\r\n            if (!item[\"complete\"]) {\r\n              return (\r\n                <TouchableOpacity\r\n                  key={item[\"tipID\"]}\r\n                  style={styles.textContainer}\r\n                  onPress={() => reading(item)}\r\n                >\r\n                  {/* <Text style={styles.text}>Type: {item[\"tipType\"]}</Text> */}\r\n                  <Text style={styles.taskTitle}>{item[\"tipName\"]}</Text>\r\n                  <Text style={styles.text}>Description: {item[\"tip\"]}</Text>\r\n                  <Text style={styles.rewardText}>\r\n                    +{item[\"tipReward\"][\"shopCurrency\"]}{\" \"}\r\n                    <FontAwesome name=\"dollar\" size={20} color=\"orange\" />\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              );\r\n            }\r\n          })}\r\n        </ScrollView>\r\n      </SafeAreaView>\r\n    </View>\r\n  );\r\n}\r\nUnreadTab.navigationOptions = {\r\n  tabBarIcon: ({ tintColor, focused }) => (\r\n    <Icon\r\n      name={focused ? \"ios-mail-unread\" : \"md-mail-unread\"}\r\n      color={tintColor}\r\n      size={25}\r\n    />\r\n  ),\r\n};\r\n\r\nconst Tab = createMaterialTopTabNavigator(\r\n  {\r\n    Unread: UnreadTab,\r\n    Read: ReadTab,\r\n  },\r\n  {\r\n    tabBarOptions: {\r\n      activeTintColor: \"black\",\r\n      showIcon: true,\r\n      showLabel: true,\r\n      style: {\r\n        backgroundColor: \"transparent\",\r\n      },\r\n    },\r\n  }\r\n);\r\nconst AppIndex = createAppContainer(Tab);\r\n\r\nexport default class NutritionalScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      baseHealth: 0,\r\n      baseStatus: 0,\r\n      baseCurr: 0,\r\n      backgroundColor: 5,\r\n    };\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(ApiKeys.FirebaseConfig);\r\n    }\r\n    () => this.readData();\r\n    completeTips = completeTips.bind(this);\r\n    reading = reading.bind(this);\r\n  }\r\n\r\n  readData() {\r\n    console.log(\"reading data in nutritional tip \" + userid);\r\n    firebase\r\n      .database()\r\n      .ref(\"response/\" + userid + \"/avatarHealth\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var temp = dataSnapShot.val();\r\n        baseHealth = temp;\r\n        this.setState({ baseHealth: temp });\r\n      });\r\n    firebase\r\n      .database()\r\n      .ref(\"response/\" + userid + \"/avatarStatus\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var temp = dataSnapShot.val();\r\n        baseStatus = temp;\r\n        this.setState({ baseStatus: temp });\r\n      });\r\n    firebase\r\n      .database()\r\n      .ref(\"response/\" + userid + \"/currency\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var temp = dataSnapShot.val();\r\n        baseCurrency = temp;\r\n        this.setState({ baseCurr: temp });\r\n      });\r\n    firebase\r\n      .database()\r\n      .ref(\"response/\" + userid + \"/backgroundColor\")\r\n      .once(\"value\", (dataSnapShot) => {\r\n        var tempColor = dataSnapShot.val();\r\n        this.setState({ backgroundColor: tempColor });\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    userid = Fire.shared.user._id;\r\n    this.readData();\r\n    readData();\r\n  }\r\n  handleCurrency = () => {\r\n    return <Text style={{ fontSize: 25, color: \"white\" }}>{baseCurrency}</Text>;\r\n  };\r\n\r\n  render() {\r\n    const background = getBackgroundImage(this.state.backgroundColor);\r\n    return (\r\n      <View style={{ flex: 1 }}>\r\n        <ImageBackground source={background} style={styles.backgroundImage}>\r\n          <Header\r\n            props={this.props}\r\n            pageName=\"Home\"\r\n            baseCurrency={baseCurrency}\r\n          />\r\n\r\n          <AppIndex />\r\n        </ImageBackground>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\n{\r\n  /*  STYLESHEET  */\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#5F7EB2\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  textContainer: {\r\n    padding: 10,\r\n    marginTop: 3,\r\n    backgroundColor: \"white\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  backgroundImage: {\r\n    flex: 1,\r\n    resizeMode: \"cover\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  text: {\r\n    color: \"#4f603c\",\r\n    fontSize: 14,\r\n    margin: 3,\r\n  },\r\n\r\n  taskCard: {\r\n    flex: 5,\r\n    backgroundColor: \"#FFE5CC\",\r\n    borderColor: \"black\",\r\n    borderWidth: 1,\r\n    margin: 10,\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  taskDiv: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n\r\n  rewardPoint: {\r\n    fontSize: 20,\r\n    color: \"darkblue\",\r\n  },\r\n\r\n  taskbody: {\r\n    flex: 1,\r\n    fontSize: 14,\r\n  },\r\n\r\n  taskDone: {\r\n    borderColor: \"#737373\",\r\n    backgroundColor: \"darkgrey\",\r\n  },\r\n\r\n  header: {\r\n    flexDirection: \"row\",\r\n  },\r\n\r\n  tabs: {\r\n    flex: 1,\r\n    backgroundColor: \"#D3E3F6\",\r\n    alignItems: \"flex-start\",\r\n    justifyContent: \"flex-start\",\r\n    textAlign: \"left\",\r\n  },\r\n\r\n  taskTitle: {\r\n    fontSize: 20,\r\n    margin: 5,\r\n  },\r\n\r\n  rewardText: {\r\n    margin: 5,\r\n    fontSize: 20,\r\n    textAlign: \"right\",\r\n    alignSelf: \"flex-end\",\r\n    fontWeight: \"400\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}